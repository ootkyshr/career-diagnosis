<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚­ãƒ£ãƒªã‚¢è¨ºæ–­ãƒ„ãƒ¼ãƒ« | æ ªå¼ä¼šç¤¾ã‚³ãƒˆãƒ©</title>
    
    <!-- ==========================================
         PWAè¨­å®š (manifest.json, sw.js ãŒå¿…è¦ã§ã™)
         ========================================== -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS (Safari) ç”¨ã®PWAè¨­å®š -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ã‚­ãƒ£ãƒªã‚¢è¨ºæ–­">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ -->
    <meta name="theme-color" content="#667eea">

    <style>
        /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
            line-height: 1.6; color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh; padding: 20px;
        }
        .container { max-width: 900px; margin: 0 auto; position: relative; }
        
        /* ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .card {
            background: #fff; border-radius: 12px; padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 30px;
            position: relative; overflow: hidden;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ã‚¿ã‚¤ãƒˆãƒ« */
        header { background: #fff; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; border-radius: 8px; text-align: center; display: flex; justify-content: center; align-items: center; }
        header img { height: 40px; max-width: 100%; object-fit: contain; }
        h2 { color: #003d7a; font-size: 26px; margin-bottom: 20px; text-align: center; }
        
        /* ãƒœã‚¿ãƒ³ */
        .btn {
            display: block; width: 100%; max-width: 400px; margin: 30px auto; padding: 18px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff; text-align: center; text-decoration: none; border-radius: 50px;
            font-size: 18px; font-weight: bold; border: none; cursor: pointer;
            transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6); }
        .btn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }
        
        /* ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ç”¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .welcome-back-section {
            background: #f0f7ff;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        }
        .welcome-title { font-size: 20px; color: #003d7a; font-weight: bold; margin-bottom: 10px; }
        .last-result-info { font-size: 16px; color: #555; margin-bottom: 20px; }
        .last-result-type { font-size: 24px; font-weight: bold; color: #d35400; display: block; margin: 10px 0; }
        
        .btn-secondary {
            background: #fff; color: #666; border: 2px solid #ccc;
            box-shadow: none; margin-top: 15px;
        }
        .btn-secondary:hover {
            background: #f8f9fa; color: #333; border-color: #999;
            transform: translateY(-1px); box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ */
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* è³ªå•ãƒ»é¸æŠè‚¢ */
        .progress-container { margin-bottom: 30px; }
        .progress-bar { width: 100%; height: 8px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin-bottom: 10px; }
        .progress-fill { height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: 0%; transition: width 0.5s ease; }
        .question-title { font-size: 20px; font-weight: 600; margin-bottom: 20px; }
        .question-note { font-size: 14px; color: #667eea; margin-bottom: 15px; font-weight: 500; }
        
        .option { 
            display: flex; align-items: center; padding: 15px 20px; 
            background: #f8f9fa; border: 2px solid #e0e0e0; border-radius: 8px; 
            cursor: pointer; margin-bottom: 12px; transition: all 0.2s;
            user-select: none;
        }
        .option:hover { background: #e8f0fe; border-color: #667eea; }
        .option.selected { background: #e8f0fe; border-color: #667eea; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2); }
        .option input { margin-right: 12px; transform: scale(1.2); cursor: pointer; }
        .option span { cursor: pointer; flex: 1; }
        
        .navigation-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 30px; }
        .btn-nav { 
            padding: 12px 30px; background: #fff; color: #667eea; 
            border: 2px solid #667eea; border-radius: 50px; font-weight: bold; 
            cursor: pointer; transition: 0.3s; font-size: 16px;
        }
        .btn-nav:hover:not(:disabled) { background: #667eea; color: #fff; }
        .btn-nav:disabled { opacity: 0.5; cursor: not-allowed; }

        /* çµæœç”»é¢ */
        .result-preview { 
            text-align: center; padding: 30px; 
            background: linear-gradient(135deg, #fff8f0 0%, #ffe8e0 100%); 
            border-radius: 12px; margin: 20px 0; 
            border: 2px solid #ffeeba; 
        }
        .result-type { font-size: 32px; font-weight: bold; color: #d35400; margin: 20px 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        
        /* ç™»éŒ²ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ */
        .register-section {
            text-align: center;
            padding: 40px 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            margin: 30px 0;
            border: 2px solid #dee2e6;
        }
        .register-microcopy { font-size: 14px; color: #666; margin-bottom: 15px; font-weight: 500; }
        .register-btn {
            display: inline-block; padding: 18px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; text-decoration: none; border-radius: 50px;
            font-size: 18px; font-weight: bold;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        .register-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6); }

        /* è©³ç´°è³‡æ–™ã‚¹ã‚¿ã‚¤ãƒ« */
        .detail-report { 
            display: none; margin-top: 40px; padding: 40px; 
            background: #f8f9fa; border-radius: 12px; border: 2px solid #e0e0e0;
        }
        .detail-report h2 { color: #003d7a; font-size: 28px; margin-bottom: 10px; text-align: center; }
        .detail-subtitle { text-align: center; font-size: 16px; color: #666; font-weight: 500; margin-bottom: 30px; }
        .report-section { 
            background: white; padding: 25px; margin-bottom: 20px; 
            border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
        }
        .report-section h3 { 
            color: #003d7a; font-size: 20px; margin-bottom: 15px; 
            padding-bottom: 10px; border-bottom: 2px solid #e0e0e0; 
        }
        .report-section p { line-height: 1.8; color: #444; margin-bottom: 15px; }
        .report-section ul { margin-left: 0; padding-left: 0; line-height: 1.8; list-style: none; }
        
        /* ToDoãƒªã‚¹ãƒˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .todo-item {
            display: flex; align-items: flex-start; padding: 12px;
            margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px;
            background-color: #fff; cursor: pointer; transition: all 0.2s ease;
        }
        .todo-item:hover { border-color: #667eea; background-color: #f8f9fa; }
        .todo-item.completed { background-color: #e8f5e9; border-color: #27ae60; }
        .todo-checkbox { margin-top: 5px; margin-right: 12px; transform: scale(1.3); cursor: pointer; }
        .todo-label { flex: 1; cursor: pointer; color: #444; }
        
        .todo-progress-area { margin-bottom: 20px; padding: 15px; background: #f0f4f8; border-radius: 8px; }
        .todo-progress-text { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 5px; color: #003d7a; }
        .todo-progress-bar-bg { width: 100%; height: 10px; background: #ddd; border-radius: 5px; overflow: hidden; }
        .todo-progress-bar-fill { height: 100%; background: #27ae60; width: 0%; transition: width 0.4s ease; }
        
        /* é€šå¸¸ã®ãƒªã‚¹ãƒˆï¼ˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ç”¨ï¼‰ */
        .roadmap-list li { margin-bottom: 10px; color: #444; padding-left: 20px; position: relative; }
        .roadmap-list li::before { content: "ğŸ“"; position: absolute; left: 0; top: 0; }
        
        .report-section strong { color: #003d7a; font-weight: 600; }
        footer { text-align: center; margin-top: 30px; color: #666; font-size: 14px; }
        
        @media (max-width: 600px) {
            .card { padding: 25px; }
            h2 { font-size: 22px; }
            .btn { font-size: 16px; padding: 15px 30px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="https://www.genspark.ai/api/files/s/iqlryruD" alt="KOTORA" style="height: 40px;">
        </header>

        <div id="page-start" class="page active">
            <div class="card">
                <h2>ğŸ¯ ã‚­ãƒ£ãƒªã‚¢è¨ºæ–­ãƒ„ãƒ¼ãƒ«</h2>
                
                <!-- ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼å‘ã‘ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div id="welcomeSection" class="welcome-back-section">
                    <p class="welcome-title">ãŠã‹ãˆã‚Šãªã•ã„</p>
                    <div class="last-result-info">
                        å‰å›ã®è¨ºæ–­çµæœï¼ˆ<span id="lastDate"></span>ï¼‰
                        <span class="last-result-type" id="lastResultType"></span>
                    </div>
                    <button class="btn" id="resumeBtn">å‰å›ã®ç¶šãã‚’è¦‹ã‚‹ï¼ˆçµæœã¸ï¼‰</button>
                    <button class="btn btn-secondary" id="restartBtn">æ–°ã—ãè¨ºæ–­ã—ç›´ã™</button>
                </div>

                <!-- åˆå›è¨ªå• / å†è¨ºæ–­å‘ã‘ -->
                <div id="introSection">
                    <div style="text-align: center; margin-bottom: 30px; color: #555;">
                        <p>8ã¤ã®è³ªå•ã§ã‚ãªãŸã®å¼·ã¿ã¨é©æ€§ã‚’åˆ†æã—ã¾ã™ã€‚</p>
                        <p>å¸‚å ´ä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹ã‚­ãƒ£ãƒªã‚¢æˆ¦ç•¥ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚</p>
                    </div>
                    <button class="btn" id="startBtn">è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹</button>
                </div>
            </div>
        </div>

        <div id="page-questions" class="page">
            <div class="card">
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                    <div style="text-align: center; font-size: 14px; color: #666;" id="progressText">è³ªå• 1 / 8</div>
                </div>
                <div id="questionContainer"></div>
                <div class="navigation-buttons">
                    <button class="btn-nav" id="prevBtn" disabled>å‰ã¸</button>
                    <button class="btn-nav" id="nextBtn">æ¬¡ã¸</button>
                </div>
            </div>
        </div>

        <div id="page-results" class="page">
            <div class="card">
                <div id="resultContent" class="result-content">
                    <h2>âœ¨ è¨ºæ–­çµæœ</h2>
                    <div class="result-preview">
                        <p style="color: #666; font-weight: bold;">ã‚ãªãŸã®ã‚­ãƒ£ãƒªã‚¢ã‚¿ã‚¤ãƒ—ã¯...</p>
                        <div class="result-type" id="resultType">ï¼ˆè¨ºæ–­ä¸­...ï¼‰</div>
                        <p id="resultDescription" style="line-height: 1.8; color: #444; margin-top: 15px;"></p>
                    </div>
                    
                    <div class="register-section">
                        <p class="register-microcopy">æ¤œè¨ãŒé€²ã¿ã‚„ã™ããªã‚Šã¾ã™</p>
                        <a href="https://www.kotora.jp/service/tenshoku_entry.php?utm_source=tool&utm_medium=tool&utm_campaign=note_carrierdiagnostictool" class="register-btn" target="_blank">ç„¡æ–™ã§ç™»éŒ²ã—ã¦ã€æƒ…å ±åé›†ã‚’å§‹ã‚ã‚‹</a>
                    </div>
                    
                    <div id="detailReport" class="detail-report" style="display: block;">
                        <h2 id="detailTitle"></h2>
                        <p id="detailSubtitle" class="detail-subtitle"></p>
                        
                        <div class="report-section">
                            <h3>ğŸ“ˆ ã‚ãªãŸã®å¸‚å ´ä¾¡å€¤</h3>
                            <p id="marketValue"></p>
                        </div>
                        
                        <div class="report-section">
                            <h3>ğŸš€ ãƒã‚¯ã‚¹ãƒˆãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆé”æˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰</h3>
                            <p style="font-size:14px; color:#666; margin-bottom:10px;">
                                å®Œäº†ã—ãŸé …ç›®ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚<br>é€²æ—ã¯è‡ªå‹•ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚
                            </p>
                            <div class="todo-progress-area">
                                <div class="todo-progress-text">
                                    <span>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é”æˆç‡</span>
                                    <span id="actionPercent">0%</span>
                                </div>
                                <div class="todo-progress-bar-bg">
                                    <div id="actionBar" class="todo-progress-bar-fill"></div>
                                </div>
                            </div>
                            <ul id="nextActions"></ul>
                        </div>
                        
                        <div class="report-section">
                            <h3>ğŸ—º å°†æ¥ã«å‘ã‘ã¦ã®ã‚­ãƒ£ãƒªã‚¢ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h3>
                            <ul id="roadmap" class="roadmap-list"></ul>
                        </div>
                        
                        <div class="report-section">
                            <h3>ğŸ’¡ ã‚³ãƒˆãƒ©ã‹ã‚‰ã®ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆ</h3>
                            <p id="onepoint"></p>
                        </div>
                    </div>
                    
                    <div class="register-section">
                        <p class="register-microcopy">æ¤œè¨ãŒé€²ã¿ã‚„ã™ããªã‚Šã¾ã™</p>
                        <a href="https://www.kotora.jp/service/tenshoku_entry.php?utm_source=tool&utm_medium=tool&utm_campaign=note_carrierdiagnostictool" class="register-btn" target="_blank">ç„¡æ–™ã§ç™»éŒ²ã—ã¦ã€æƒ…å ±åé›†ã‚’å§‹ã‚ã‚‹</a>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <button class="btn-nav" id="retryBtn" style="padding: 12px 40px;">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 KOTORA Co., Ltd. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // --- Service Workerã®ç™»éŒ² (PWAåŒ–) ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful:', registration.scope);
                    }, err => {
                        console.log('ServiceWorker registration failed:', err);
                    });
            });
        }

        // --- è³ªå•ãƒ‡ãƒ¼ã‚¿ ---
        const questions = [
            { 
                id: 1, 
                text: "ç¾åœ¨ã®ã‚ãªãŸã®è·ç¨®ã«æœ€ã‚‚è¿‘ã„ã‚‚ã®ã¯ï¼Ÿ", 
                options: [
                    { text: "é‡‘è", scores: { finance: 3, analytical: 1 } },
                    { text: "ä¸å‹•ç”£", scores: { realestate: 3, negotiation: 1 } },
                    { text: "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°", scores: { consulting: 3, strategy: 2 } },
                    { text: "IT / DXã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", scores: { it: 3, technical: 2 } },
                    { text: "è£½é€ æ¥­", scores: { manufacturing: 3, specialist: 1 } },
                    { text: "çµŒå–¶å¹¹éƒ¨ ç®¡ç†ç³»ãƒ“ã‚¸ãƒã‚¹", scores: { leadership: 3, management: 2 } },
                    { text: "ãã®ä»–", scores: { versatility: 1 } }
                ]
            },
            { 
                id: 2, 
                text: "ã‚ãªãŸã®ã‚­ãƒ£ãƒªã‚¢ã§æœ€ã‚‚é‡è¦–ã™ã‚‹ã“ã¨ã¯ï¼Ÿ", 
                options: [
                    { text: "å°‚é–€æ€§ã‚’æ·±ã‚ã‚‹ã“ã¨", scores: { specialist: 3, technical: 2 } },
                    { text: "ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", scores: { leadership: 3, management: 2 } },
                    { text: "å¹…åºƒã„çµŒé¨“ã‚’ç©ã‚€ã“ã¨", scores: { generalist: 3, versatility: 2 } },
                    { text: "ç¤¾ä¼šçš„ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚’ç”Ÿã¿å‡ºã™ã“ã¨", scores: { impact: 3, strategy: 2 } }
                ]
            },
            { 
                id: 3, 
                text: "ä»•äº‹ã§æœ€ã‚‚ã‚„ã‚ŠãŒã„ã‚’æ„Ÿã˜ã‚‹ç¬é–“ã¯ï¼Ÿ", 
                options: [
                    { text: "è¤‡é›‘ãªèª²é¡Œã‚’è«–ç†çš„ã«è§£æ±ºã—ãŸã¨ã", scores: { analytical: 3, problem_solving: 2 } },
                    { text: "ãƒãƒ¼ãƒ ã‚’ç‡ã„ã¦æˆæœã‚’å‡ºã—ãŸã¨ã", scores: { leadership: 3, teamwork: 2 } },
                    { text: "æ–°ã—ã„ä»•çµ„ã¿ã‚„æˆ¦ç•¥ã‚’å‰µã‚Šå‡ºã—ãŸã¨ã", scores: { strategy: 3, innovation: 2 } },
                    { text: "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„é¡§å®¢ã«å–œã°ã‚ŒãŸã¨ã", scores: { communication: 3, client_focus: 2 } }
                ]
            },
            { 
                id: 4, 
                text: "ã‚ãªãŸãŒæœ€ã‚‚å¾—æ„ã¨ã™ã‚‹ã‚¹ã‚­ãƒ«ã¯ï¼Ÿ", 
                options: [
                    { text: "ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»å®šé‡åˆ†æ", scores: { analytical: 3, technical: 2 } },
                    { text: "æˆ¦ç•¥ç«‹æ¡ˆãƒ»ä¼ç”»", scores: { strategy: 3, planning: 2 } },
                    { text: "å¯¾äººæŠ˜è¡ãƒ»äº¤æ¸‰", scores: { communication: 3, negotiation: 2 } },
                    { text: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ", scores: { management: 3, execution: 2 } }
                ]
            },
            { 
                id: 5, 
                text: "ç†æƒ³çš„ãªåƒãæ–¹ã¯ï¼Ÿ", 
                options: [
                    { text: "ã˜ã£ãã‚Šä¸€ã¤ã®ãƒ†ãƒ¼ãƒã«å–ã‚Šçµ„ã‚€", scores: { specialist: 2, focus: 2 } },
                    { text: "è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åŒæ™‚é€²è¡Œ", scores: { versatility: 2, multitasking: 2 } },
                    { text: "ãƒãƒ¼ãƒ ã§å”åŠ›ã—ãªãŒã‚‰é€²ã‚ã‚‹", scores: { teamwork: 3, collaboration: 2 } },
                    { text: "å€‹äººã®è£é‡ã§è‡ªç”±ã«é€²ã‚ã‚‹", scores: { autonomy: 3, independence: 2 } }
                ]
            },
            { 
                id: 6, 
                text: "è»¢è·ã§æœ€ã‚‚å®Ÿç¾ã—ãŸã„ã“ã¨ã¯ï¼Ÿ", 
                options: [
                    { text: "å¹´åã‚¢ãƒƒãƒ—", scores: { ambition: 2, finance: 1 } },
                    { text: "ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—ãƒ»æ˜‡é€²", scores: { leadership: 2, ambition: 3 } },
                    { text: "æ–°ã—ã„ã‚¹ã‚­ãƒ«ãƒ»çµŒé¨“ã®ç²å¾—", scores: { growth: 3, learning: 2 } },
                    { text: "ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹ã®æ”¹å–„", scores: { balance: 3, wellbeing: 2 } }
                ]
            },
            { 
                id: 7, 
                text: "èˆˆå‘³ã®ã‚ã‚‹ä¼æ¥­ã‚¿ã‚¤ãƒ—ã¯ï¼Ÿ", 
                type: "checkbox", 
                options: [
                    { text: "å¤–è³‡ç³»ä¼æ¥­", scores: { global: 2, versatility: 1 } },
                    { text: "æ—¥ç³»å¤§æ‰‹ä¼æ¥­", scores: { corporate: 2, stability: 1 } },
                    { text: "ãƒ™ãƒ³ãƒãƒ£ãƒ¼ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—", scores: { entrepreneurship: 2, innovation: 1 } },
                    { text: "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ•ã‚¡ãƒ¼ãƒ ", scores: { consulting: 2, strategy: 1 } },
                    { text: "PEãƒ•ã‚¡ãƒ³ãƒ‰ãƒ»æŠ•è³‡ä¼šç¤¾", scores: { finance: 2, analytical: 1 } },
                    { text: "äº‹æ¥­ä¼šç¤¾ï¼ˆçµŒå–¶ä¼ç”»ãƒ»DXæ¨é€²ï¼‰", scores: { management: 2, it: 1 } }
                ]
            },
            { 
                id: 8, 
                text: "5å¹´å¾Œã€ã‚ãªãŸã¯ã©ã†ãªã£ã¦ã„ãŸã„ã§ã™ã‹ï¼Ÿ", 
                options: [
                    { text: "ãã®é“ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã¨ã—ã¦èªã‚ã‚‰ã‚Œã¦ã„ã‚‹", scores: { specialist: 3, expertise: 3 } },
                    { text: "ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ»çµŒå–¶å±¤ã¨ã—ã¦æ´»èºã—ã¦ã„ã‚‹", scores: { leadership: 3, management: 3 } },
                    { text: "èµ·æ¥­ã¾ãŸã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹", scores: { entrepreneurship: 3, autonomy: 2 } },
                    { text: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«æ´»èºã—ã¦ã„ã‚‹", scores: { global: 3, versatility: 2 } }
                ]
            }
        ];

        // --- ã‚¿ã‚¤ãƒ—å®šç¾©ã¨èª¬æ˜æ–‡ ---
        const TYPE_INFO = {
            "æˆ¦ç•¥æ€è€ƒå‹ãƒªãƒ¼ãƒ€ãƒ¼": "æˆ¦ç•¥çš„æ€è€ƒåŠ›ã¨ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’å…¼ã­å‚™ãˆãŸã‚¿ã‚¤ãƒ—ã€‚çµ„ç¹”ã‚’ç‡ã„ã¦å¤§ããªæˆæœã‚’ç”Ÿã¿å‡ºã™ã“ã¨ãŒå¾—æ„ã§ã™ã€‚çµŒå–¶å±¤ã‚„ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆè·ã§çœŸä¾¡ã‚’ç™ºæ®ã§ãã¾ã™ã€‚",
            "é‡‘èã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ": "é‡‘èçŸ¥è­˜ã¨åˆ†æåŠ›ã«å„ªã‚ŒãŸã‚¿ã‚¤ãƒ—ã€‚é«˜åº¦ãªé‡‘èå°‚é–€æ€§ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹åˆ†é‡ã§æ´»èºã§ãã¾ã™ã€‚æŠ•è³‡éŠ€è¡Œã€PEãƒ•ã‚¡ãƒ³ãƒ‰ã€è²¡å‹™ä¼ç”»ãªã©ãŒé©è·ã§ã™ã€‚",
            "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": "æˆ¦ç•¥ç«‹æ¡ˆã¨å•é¡Œè§£æ±ºã«é•·ã‘ãŸã‚¿ã‚¤ãƒ—ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®çµŒå–¶èª²é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã¾ã™ã€‚æˆ¦ç•¥ã‚³ãƒ³ã‚µãƒ«ã‚„ãƒ“ã‚¸ãƒã‚¹ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã«æœ€é©ã§ã™ã€‚",
            "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»DXãƒªãƒ¼ãƒ€ãƒ¼": "æŠ€è¡“åŠ›ã¨ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å¿—å‘ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«å¤‰é©ã‚’æ¨é€²ã—ã€äº‹æ¥­æˆé•·ã«è²¢çŒ®ã§ãã¾ã™ã€‚CTOã€DXæ¨é€²è²¬ä»»è€…ã€ãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ‰ãªã©ã§æ´»èºã§ãã¾ã™ã€‚",
            "å°‚é–€æ€§è¿½æ±‚å‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ": "ç‰¹å®šé ˜åŸŸã®å°‚é–€æ€§ã‚’æ·±ã‚ã‚‹ã“ã¨ã«æƒ…ç†±ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚ãã®é“ã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã¨ã—ã¦æ´»èºã—ã¾ã™ã€‚å°‚é–€è·ã€ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆãƒã‚¸ã‚·ãƒ§ãƒ³ã§å¼·ã¿ã‚’ç™ºæ®ã§ãã¾ã™ã€‚",
            "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¿—å‘å‹ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": "å„ªã‚ŒãŸã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŠ›ã¨æŠ˜è¡åŠ›ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚ä¿¡é ¼é–¢ä¿‚ã‚’æ§‹ç¯‰ã—æœ€é©ãªææ¡ˆãŒã§ãã¾ã™ã€‚å–¶æ¥­ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µã‚¯ã‚»ã‚¹ãªã©ã«å‘ã„ã¦ã„ã¾ã™ã€‚",
            "äº‹æ¥­å¤‰é©ãƒªãƒ¼ãƒ€ãƒ¼": "å¤‰é©ã‚’æ¨é€²ã™ã‚‹å®Ÿè¡ŒåŠ›ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚æ–°è¦äº‹æ¥­ã‚„ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ–ãƒ«ãªç’°å¢ƒã§åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã€æ–°è¦äº‹æ¥­é–‹ç™ºã€äº‹æ¥­å†ç”Ÿãªã©ãŒé©è·ã§ã™ã€‚",
            "ãƒãƒ«ãƒã‚¿ãƒ¬ãƒ³ãƒˆå‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ": "å¹…åºƒã„çŸ¥è­˜ã¨ã‚¹ã‚­ãƒ«ã‚’æŒã¡ã€æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ã‚¿ã‚¤ãƒ—ã€‚å¤šæ§˜ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¨ªæ–­çš„ã«æ´»èºã—ã¾ã™ã€‚äº‹æ¥­ä¼ç”»ã€çµŒå–¶ä¼ç”»ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãªã©ã§å¼·ã¿ã‚’ç™ºæ®ã§ãã¾ã™ã€‚"
        };

        // --- è©³ç´°è³‡æ–™ãƒ‡ãƒ¼ã‚¿ ---
        const detailReports = {
            "æˆ¦ç•¥æ€è€ƒå‹ãƒªãƒ¼ãƒ€ãƒ¼": {
                subtitle: "ã€œçµ„ç¹”ã‚’å‹åˆ©ã«å°ãã€çµŒå–¶ã®ç¾…é‡ç›¤ã€œ",
                marketValue: "ä¸ç¢ºå®Ÿæ€§ã®é«˜ã„ç¾ä»£ã«ãŠã„ã¦ã€ãƒ•ã‚¡ã‚¯ãƒˆã«åŸºã¥ãè«–ç†çš„ã«é€²ã‚€ã¹ãé“ã‚’ç¤ºã›ã‚‹äººæã¯å¸Œå°‘ã§ã™ã€‚ç‰¹ã«ã€å˜ãªã‚‹åˆ†æå±‹ã§ã¯ãªãã€Œäººã‚’å‹•ã‹ã™ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€ã‚’å…¼ã­å‚™ãˆã¦ã„ã‚‹ç‚¹ã§ã€CxOï¼ˆçµŒå–¶å¹¹éƒ¨ï¼‰å€™è£œã¨ã—ã¦ã®å¸‚å ´ä¾¡å€¤ãŒéå¸¸ã«é«˜ã„çŠ¶æ…‹ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ã€Œæ„æ€æ±ºå®šã€ã®è¨€èªåŒ–</strong><br>ãƒãƒ¼ãƒ ã«å¯¾ã—ã¦ã€çµè«–ã ã‘ã§ãªãã€Œãªãœãã®åˆ¤æ–­ã«è‡³ã£ãŸã‹ã€ã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’å…±æœ‰ã™ã‚‹é »åº¦ã‚’ä¸Šã’ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.2] éé€£ç¶šãªæˆé•·ã®æ¨¡ç´¢</strong><br>æ—¢å­˜äº‹æ¥­ã®å»¶é•·ç·šï¼ˆæ”¹å–„ï¼‰ã§ã¯ãªãã€å…¨ãæ–°ã—ã„åç›Šæºã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ï¼ˆæ”¹é©ï¼‰ã‚’æ§‹æƒ³ã™ã‚‹æ™‚é–“ã‚’é€±ã«1æ™‚é–“ã¯ç¢ºä¿ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] åå¯¾æ„è¦‹ã®å¸å</strong><br>è‡ªåˆ†ã®æ„è¦‹ã«åå¯¾ã—ãã†ãªãƒ¡ãƒ³ãƒãƒ¼ã¨1å¯¾1ã§è©±ã—ã€æ‡¸å¿µç‚¹ã‚’èãå‡ºã™æ™‚é–“ã‚’ä½œã£ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["äº‹æ¥­è²¬ä»»è€…ï¼ˆBusiness Unit Headï¼‰", "CSOï¼ˆæœ€é«˜æˆ¦ç•¥è²¬ä»»è€…ï¼‰", "çµŒå–¶ä¼ç”»éƒ¨é•·"],
                onepoint: "é¢æ¥ã§ã¯ã€Œæˆ¦ç•¥ã®ç¾ã—ã•ã€ã‚ˆã‚Šã‚‚ã€Œæ³¥è‡­ã„å®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚ºã§ã€æŠµæŠ—å‹¢åŠ›ã‚’ã©ã†èª¬å¾—ã—ãŸã‹ã€ã¨ã„ã†äººé–“çš„ãªèª¿æ•´åŠ›ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãŒé«˜ãè©•ä¾¡ã•ã‚Œã¾ã™ã€‚"
            },
            "é‡‘èã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ": {
                subtitle: "ã€œè³‡æœ¬ã®æµã‚Œã‚’èª­ã¿è§£ãã€ä¼æ¥­ä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹å‚è¬€ã€œ",
                marketValue: "æ•°å­—ã¨ã„ã†ä¸–ç•Œå…±é€šè¨€èªã‚’æ“ã‚Œã‚‹ã‚ãªãŸã¯ã€ã©ã®æ¥­ç•Œã§ã‚‚é‡å®ã•ã‚Œã¾ã™ã€‚ç‰¹ã«ã€å˜ãªã‚‹ç®¡ç†ä¼šè¨ˆã‚„è²¡å‹™å‡¦ç†ã«ã¨ã©ã¾ã‚‰ãšã€ã€ŒæŠ•è³‡å¯¾åŠ¹æœï¼ˆROIï¼‰ã€ã‚„ã€Œãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹æˆ¦ç•¥ã€è¦–ç‚¹ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€PEãƒ•ã‚¡ãƒ³ãƒ‰ã‚„CFOå€™è£œã¨ã—ã¦å¼•ãæ‰‹ã‚ã¾ãŸã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ãƒ“ã‚¸ãƒã‚¹ç†è§£ã®æ·±åŒ–</strong><br>æ•°å­—ã®è£å´ã«ã‚ã‚‹ã€Œç¾å ´ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚„ã€Œå•†æµã€ã‚’è§£åƒåº¦é«˜ãç†è§£ã™ã‚‹ã‚ˆã†åŠªã‚ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.2] ã‚¨ã‚¯ã‚¤ãƒ†ã‚£ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®æ§‹ç¯‰</strong><br>è‡ªç¤¾ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ãŒã€Œã©ã†ã™ã‚Œã°æ ªä¾¡ï¼ˆä¼æ¥­ä¾¡å€¤ï¼‰ãŒä¸ŠãŒã‚‹ã‹ã€ã‚’æŠ•è³‡å®¶ç›®ç·šã§èªã‚‹è¨“ç·´ã‚’ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] åˆ†æãƒ¬ãƒãƒ¼ãƒˆä½œæˆ</strong><br>æ‹…å½“åˆ†é‡ã«é–¢ã™ã‚‹åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’A4ãƒ»1æšã§ä½œæˆã—ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã™ã‚‹ç¿’æ…£ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["CFOï¼ˆæœ€é«˜è²¡å‹™è²¬ä»»è€…ï¼‰", "PEãƒ•ã‚¡ãƒ³ãƒ‰ / ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚­ãƒ£ãƒ”ã‚¿ãƒªã‚¹ãƒˆ", "M&Aã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒªãƒ¼"],
                onepoint: "ã€Œå®ˆã‚Šï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ»ç®¡ç†ï¼‰ã€ã ã‘ã§ãªãã€ã€Œæ”»ã‚ï¼ˆè³‡é‡‘èª¿é”ãƒ»M&Aãƒ»æŠ•è³‡ï¼‰ã€ã®çµŒé¨“ã‚’ç©ã‚ã‚‹ç’°å¢ƒã«èº«ã‚’ç½®ãã“ã¨ãŒã€ç†æƒ³ã®å¹´åã‚¢ãƒƒãƒ—ã‚’å®Ÿç¾ã™ã‚‹éµã§ã™ã€‚"
            },
            "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": {
                subtitle: "ã€œé›£å•ã‚’è§£æ±ºã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å¤‰é©ã‚’ã‚‚ãŸã‚‰ã™çŸ¥ã®å·¨äººã€œ",
                marketValue: "çŸ­æœŸé–“ã§æœ¬è³ªçš„ãªèª²é¡Œã‚’ç‰¹å®šã—ã€è§£æ±ºç­–ã‚’æç¤ºã™ã‚‹ã€Œãƒ—ãƒ­ãƒ–ãƒ¬ãƒ ãƒ»ã‚½ãƒ«ãƒ“ãƒ³ã‚°ã‚¹ã‚­ãƒ«ã€ã¯ã€äº‹æ¥­ä¼šç¤¾ã§ã‚‚å³æˆ¦åŠ›ã§ã™ã€‚ç‰¹ã«DXã‚„ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£ãªã©ã€æ­£è§£ã®ãªã„ãƒ†ãƒ¼ãƒã«ãŠã„ã¦ã‚ãªãŸã®ã‚¹ã‚­ãƒ«ã¯è¼ãã¾ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ãƒ­ã‚¸ãƒƒã‚¯ãƒ„ãƒªãƒ¼åˆ†è§£</strong><br>ä»ŠæŠ±ãˆã¦ã„ã‚‹èª²é¡Œã‚’1ã¤ã€ãƒ­ã‚¸ãƒƒã‚¯ãƒ„ãƒªãƒ¼ã§åˆ†è§£ã—ã€æ§‹é€ åŒ–ã—ã¦è€ƒãˆã‚‹ç™–ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ã€Œå®Ÿè¡Œã€ã¸ã®ã‚³ãƒŸãƒƒãƒˆ</strong><br>çµµã«æã„ãŸé¤…ï¼ˆç¶ºéº—ãªè³‡æ–™ï¼‰ã§çµ‚ã‚ã‚‰ã›ãšã€ç¾å ´ãŒå‹•ã‘ã‚‹ãƒ¬ãƒ™ãƒ«ã¾ã§è½ã¨ã—è¾¼ã‚€ã€Œå®Ÿè¡Œæ”¯æ´ã€ã®ã‚¹ã‚­ãƒ«ã‚’ç£¨ãã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆåŠ›</strong><br>èª²é¡Œè§£æ±ºã ã‘ã§ãªãã€ã€Œã‚ãªãŸã«ã¾ãŸé ¼ã¿ãŸã„ã€ã¨æ€ã‚ã›ã‚‹å–¶æ¥­åŠ›ãƒ»é–¢ä¿‚æ§‹ç¯‰åŠ›ã‚’æ„è­˜ã—ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ•ã‚¡ãƒ¼ãƒ  ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼", "å¤§æ‰‹äº‹æ¥­ä¼šç¤¾ çµŒå–¶ä¼ç”»å®¤é•·", "PEãƒ•ã‚¡ãƒ³ãƒ‰ æŠ•è³‡å…ˆãƒãƒªãƒ¥ãƒ¼ã‚¢ãƒƒãƒ—æ‹…å½“"],
                onepoint: "äº‹æ¥­ä¼šç¤¾ã¸ã®è»¢è·ã‚’ç›®æŒ‡ã™å ´åˆã€ã€Œè©•è«–å®¶ã€ã¨è¦‹ã‚‰ã‚Œãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã€Œè‡ªã‚‰æ‰‹ã‚’å‹•ã‹ã—ã€æ³¥ã‚’ã‹ã¶ã£ãŸçµŒé¨“ã€ã‚’è·å‹™çµŒæ­´æ›¸ã«ã©ã†ç››ã‚Šè¾¼ã‚€ã‹ãŒé‡è¦ã§ã™ã€‚"
            },
            "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»DXãƒªãƒ¼ãƒ€ãƒ¼": {
                subtitle: "ã€œæŠ€è¡“ã¨ãƒ“ã‚¸ãƒã‚¹ã‚’èåˆã•ã›ã€æœªæ¥ã‚’å®Ÿè£…ã™ã‚‹å»ºç¯‰å®¶ã€œ",
                marketValue: "ã€ŒæŠ€è¡“ãŒã‚ã‹ã‚‹ã€äººæã¯å¤šã„ã§ã™ãŒã€ã€ŒæŠ€è¡“ã‚’ä½¿ã£ã¦ãƒ“ã‚¸ãƒã‚¹ï¼ˆåˆ©ç›Šï¼‰ã‚’ã©ã†ç”Ÿã¿å‡ºã™ã‹ã€ã‚’èªã‚Œã‚‹äººæã¯æ¥µã‚ã¦ä¸è¶³ã—ã¦ã„ã¾ã™ã€‚çµŒå–¶å±¤ã¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å…±é€šè¨€èªã‚’æŒã¡ã€ç¿»è¨³ã§ãã‚‹ã‚ãªãŸã¯ã€ç¾ä»£ä¼æ¥­ã®æœ€é‡è¦äººç‰©ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] PLï¼ˆæç›Šï¼‰æ„Ÿè¦šã®é¤Šæˆ</strong><br>å°å…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚„é–‹ç™ºã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒã€ã©ã‚Œã ã‘ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›ã‚„å£²ä¸Šå¢—ã«ç¹‹ãŒã‚‹ã‹ã‚’ã€å¸¸ã«é‡‘é¡ã§è©¦ç®—ã™ã‚‹ç™–ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ç¿»è¨³åŠ›ã®å‘ä¸Š</strong><br>æŠ€è¡“çš„ãªèª²é¡Œï¼ˆæŠ€è¡“çš„è² å‚µãªã©ï¼‰ã‚’ã€éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ã«å°‚é–€ç”¨èªãªã—ã§èª¬æ˜ã™ã‚‹æ–‡ç« ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] çµ„ç¹”å¤‰é©ï¼ˆãƒã‚§ãƒ³ã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼‰</strong><br>ã‚·ã‚¹ãƒ†ãƒ å°å…¥æ™‚ã®ç¾å ´ã®åç™ºã‚’ã©ã†æŠ‘ãˆã€å®šç€ã•ã›ã‚‹ã‹ã€‚ã€Œäººã€ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚¹ã‚­ãƒ«ã‚’ç£¨ã„ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["CTOï¼ˆæœ€é«˜æŠ€è¡“è²¬ä»»è€…ï¼‰ / CDOï¼ˆæœ€é«˜ãƒ‡ã‚¸ã‚¿ãƒ«è²¬ä»»è€…ï¼‰", "VPoEï¼ˆVice President of Engineeringï¼‰", "DXæ¨é€²æœ¬éƒ¨é•·"],
                onepoint: "ãƒã‚¤ã‚¯ãƒ©ã‚¹æ±‚äººã§ã¯ã€ç‰¹å®šã®è¨€èªã‚¹ã‚­ãƒ«ã‚ˆã‚Šã‚‚ã€ŒæŠ€è¡“é¸å®šã®ç†ç”±ã€ã‚„ã€Œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢çµ„ç¹”ã®æ¡ç”¨ãƒ»è©•ä¾¡åˆ¶åº¦ã®æ§‹ç¯‰çµŒé¨“ã€ãŒå•ã‚ã‚Œã¾ã™ã€‚"
            },
            "å°‚é–€æ€§è¿½æ±‚å‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ": {
                subtitle: "ã€œç‰¹å®šã®é ˜åŸŸã‚’æ¥µã‚ã€ä»£æ›¿ä¸å¯èƒ½ãªä¾¡å€¤ã‚’æä¾›ã™ã‚‹è·äººã€œ",
                marketValue: "ã€Œã“ã®åˆ†é‡ãªã‚‰ã€‡ã€‡ã•ã‚“ã€ã¨è¨€ã‚ã‚Œã‚‹ç¬¬ä¸€äººè€…ãƒã‚¸ã‚·ãƒ§ãƒ³ã¯ã€æ™¯æ°—å¤‰å‹•ã«å¼·ãã€ç‹¬ç«‹ã‚„é¡§å•ã¨ã—ã¦ã®é“ã‚‚é–‹ã‘ã¾ã™ã€‚æ³•å‹™ã€çŸ¥è²¡ã€ç‰¹å®šæŠ€è¡“ã€ãƒªã‚¹ã‚¯ç®¡ç†ãªã©ã€æ·±ã•ãŒãã®ã¾ã¾å‚å…¥éšœå£ï¼ˆé˜²å¾¡åŠ›ï¼‰ã«ãªã‚Šã¾ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] æœ€æ–°æƒ…å ±ã®ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—</strong><br>è‡ªåˆ†ã®å°‚é–€åˆ†é‡ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã€æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„è«–æ–‡ã‚’1ã¤èª­ã¿ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ç¤¾å¤–ç™ºä¿¡ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°</strong><br>ç¤¾å†…ã ã‘ã§ãªãã€æ¥­ç•Œå›£ä½“ã‚„ã‚»ãƒŸãƒŠãƒ¼ç™»å£‡ã€åŸ·ç­†ãªã©ã‚’é€šã˜ã¦ã€Œå€‹äººã®åå‰ã€ã§ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ä½œã£ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.3] å‘¨è¾ºé ˜åŸŸã¸ã®æŸ“ã¿å‡ºã—</strong><br>å°‚é–€çŸ¥è­˜ã‚’ã€éš£æ¥ã™ã‚‹ãƒ“ã‚¸ãƒã‚¹é ˜åŸŸï¼ˆä¾‹ï¼šæ³•å‹™ãªã‚‰ãƒ“ã‚¸ãƒã‚¹é–‹ç™ºï¼‰ã¨ã©ã†çµ¡ã‚ã‚‹ã‹æ„è­˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"
                ],
                roadmap: ["å°‚é–€å½¹å“¡ï¼ˆCLOã€CISOãªã©ï¼‰", "ç‰¹å®šé ˜åŸŸã®æŠ€è¡“é¡§å• / ç‹¬ç«‹ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ", "ç ”ç©¶é–‹ç™ºéƒ¨é–€ã®ãƒˆãƒƒãƒ—"],
                onepoint: "å°‚é–€ç”¨èªã‚’ä¸¦ã¹ã‚‹ã®ã§ã¯ãªãã€å°‚é–€å¤–ã®äººï¼ˆçµŒå–¶è€…ï¼‰ã«å¯¾ã—ã¦ã€Œãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã€ã‚’å¹³æ˜“ãªè¨€è‘‰ã§èª¬æ˜ã§ãã‚‹èƒ½åŠ›ãŒã€å ±é…¬ã‚¢ãƒƒãƒ—ã®æ±ºã‚æ‰‹ã«ãªã‚Šã¾ã™ã€‚"
            },
            "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¿—å‘å‹ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": {
                subtitle: "ã€œé¡§å®¢ã®å¿ƒã‚’æ´ã¿ã€ä¿¡é ¼ã‚’åç›Šã«å¤‰ãˆã‚‹ãƒˆãƒƒãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã€œ",
                marketValue: "AIãŒé€²åŒ–ã—ã¦ã‚‚ã€é«˜åº¦ãªã€Œäº¤æ¸‰ã€ã€Œåˆ©å®³èª¿æ•´ã€ã€Œä¿¡é ¼æ§‹ç¯‰ã€ã¯äººé–“ã«ã—ã‹ã§ãã¾ã›ã‚“ã€‚ç‰¹ã«ç„¡å½¢å•†æã‚„é«˜é¡å•†æã«ãŠã‘ã‚‹ãƒã‚¤ãƒ¬ãƒ™ãƒ«ãªæŠ˜è¡åŠ›ã¯ã€ã©ã®ã‚ˆã†ãªãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã§ã‚‚åç›Šã®æŸ±ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] é¡§å®¢æƒ…å ±ã®åé›†</strong><br>é‡è¦é¡§å®¢ã®æœ€æ–°ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹ã‚„æ±ºç®—è³‡æ–™ã‚’èª­ã¿ã€é¡§å®¢ã®çµŒå–¶çŠ¶æ³ã‚’æŠŠæ¡ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ææ¡ˆåŠ›</strong><br>å¾¡ç”¨èãå–¶æ¥­ã‹ã‚‰è„±å´ã—ã€é¡§å®¢è‡ªèº«ã‚‚æ°—ã¥ã„ã¦ã„ãªã„ã€ŒçœŸã®èª²é¡Œï¼ˆã‚¤ãƒ³ã‚µã‚¤ãƒˆï¼‰ã€ã‚’æç¤ºã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¢ºç«‹ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] çµŒå–¶è¦–ç‚¹ã®ç²å¾—</strong><br>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ‹…å½“è€…ã ã‘ã§ãªãã€æ±ºè£è€…ï¼ˆå½¹å“¡ã‚¯ãƒ©ã‚¹ï¼‰ã¨å¯¾ç­‰ã«ãƒ“ã‚¸ãƒã‚¹ã®è©±ãŒã§ãã‚‹ã‚ˆã†ã€æ•°å­—ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚"
                ],
                roadmap: ["å–¶æ¥­æœ¬éƒ¨é•· / CROï¼ˆæœ€é«˜åç›Šè²¬ä»»è€…ï¼‰", "ã‚«ãƒ³ãƒˆãƒªãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆå¤–è³‡ç³»ï¼‰", "ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µã‚¯ã‚»ã‚¹è²¬ä»»è€…"],
                onepoint: "ã€Œå£²ä¸Šæ•°å­—ã€ã¯å½“ç„¶ã§ã™ãŒã€ã€Œå†ç¾æ€§ã®ã‚ã‚‹å–¶æ¥­ãƒ—ãƒ­ã‚»ã‚¹ã®æ§‹ç¯‰ã€ã‚„ã€Œè‹¥æ‰‹ã®è‚²æˆæ‰‹æ³•ã€ã‚’è¨€èªåŒ–ã§ãã¦ã„ã‚‹ã¨ã€ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆè·ã¨ã—ã¦ã®è©•ä¾¡ãŒè·³ã­ä¸ŠãŒã‚Šã¾ã™ã€‚"
            },
            "äº‹æ¥­å¤‰é©ãƒªãƒ¼ãƒ€ãƒ¼": {
                subtitle: "ã€œæ··æ²Œã‚’æã‚Œãšã€ã‚¼ãƒ­ã‹ã‚‰ã‚¤ãƒã‚’ç”Ÿã¿å‡ºã™é–‹æ‹“è€…ã€œ",
                marketValue: "æ–°è¦äº‹æ¥­ã®ç«‹ã¡ä¸Šã’ã€ä¸æ¡ç®—äº‹æ¥­ã®å†ç”Ÿã€çµ„ç¹”ã®æ€¥æ‹¡å¤§ãªã©ã€ã‚«ã‚ªã‚¹ãªçŠ¶æ³ã‚’æ¥½ã—ã‚ã‚‹äººæã¯è²´é‡ã§ã™ã€‚æ•´ã£ã¦ã„ãªã„ç’°å¢ƒã§è‡ªèµ°ã—ã€é“ã‚’ä½œã‚‹åŠ›ã¯ã€ãƒ™ãƒ³ãƒãƒ£ãƒ¼ä¼æ¥­ã‚„å¤§ä¼æ¥­ã®ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³éƒ¨é–€ã§æœ€ã‚‚æ±‚ã‚ã‚‰ã‚Œã‚‹è³‡è³ªã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ã‚¼ãƒ­ãƒ™ãƒ¼ã‚¹æ€è€ƒ</strong><br>ã€Œã‚‚ã—ä»Šã®äº‹æ¥­ãŒæ˜æ—¥ãªããªã£ãŸã‚‰ä½•ã‚’ã™ã‚‹ã‹ã€ã‚’1ã¤è€ƒãˆã€ãƒ¡ãƒ¢ã«æ®‹ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ä»®èª¬æ¤œè¨¼ã®é«˜é€ŸåŒ–</strong><br>å®Œç’§ãªè¨ˆç”»ã‚’ç«‹ã¦ã‚‹ã‚ˆã‚Šã€å°ã•ãªãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’å¸‚å ´ã«å‡ºã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹ã‚µã‚¤ã‚¯ãƒ«ï¼ˆPDCAï¼‰ã‚’é«˜é€ŸåŒ–ã•ã›ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.3] ã€Œæ’¤é€€ã€ã®åŸºæº–ä½œã‚Š</strong><br>æ”»ã‚ã‚‹ã ã‘ã§ãªãã€ãƒ€ãƒ¡ãªæ™‚ã«ã©ã“ã§æåˆ‡ã‚Šã™ã‚‹ã‹ã¨ã„ã†ã€å†·å¾¹ãªåˆ¤æ–­è»¸ã‚’æŒã¤è¨“ç·´ã‚’ã—ã¾ã—ã‚‡ã†ã€‚"
                ],
                roadmap: ["èµ·æ¥­å®¶ / CEO", "æ–°è¦äº‹æ¥­é–‹ç™ºå®¤é•·", "äº‹æ¥­å†ç”Ÿãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"],
                onepoint: "å¤±æ•—çµŒé¨“ã“ããŒè³‡ç”£ã§ã™ã€‚ã€Œãªãœå¤±æ•—ã—ãŸã‹ã€ã€Œæ¬¡ã«ã©ã†æ´»ã‹ã™ã‹ã€ã‚’æ·±ãå†…çœã—èªã‚Œã‚‹äººã¯ã€æŠ•è³‡å®¶ã‚„çµŒå–¶é™£ã‹ã‚‰æ·±ã„ä¿¡é ¼ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚"
            },
            "ãƒãƒ«ãƒã‚¿ãƒ¬ãƒ³ãƒˆå‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ": {
                subtitle: "ã€œã‚ã‚‰ã‚†ã‚‹ãƒ”ãƒ¼ã‚¹ã‚’ç¹‹ãåˆã‚ã›ã€çµ„ç¹”ã‚’æ©Ÿèƒ½ã•ã›ã‚‹ä¸‡èƒ½ã®æ¥ç€å‰¤ã€œ",
                marketValue: "å¤‰åŒ–ã®æ¿€ã—ã„ç¾ä»£ã§ã¯ã€Œä½•ã§ã‚‚å±‹ã€ã§ã¯ãªãã€Œå…¨ä½“æœ€é©åŒ–ã®ãƒ—ãƒ­ã€ã¨ã—ã¦å†è©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚éƒ¨é–€é–“ã®å£ã‚’å–ã‚Šæ‰•ã„ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰ã«é€²ã‚ã‚‹åŠ›ã¯ã€COOã‚„Chief of Staffï¼ˆç¤¾é•·å®¤é•·ï¼‰ã¨ã—ã¦æ¥µã‚ã¦é‡è¦ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã®å¯è¦–åŒ–</strong><br>è‡ªåˆ†ãŒç¹‹ã’ã‚‰ã‚Œãã†ãªã€Œéƒ¨ç½²ã¨éƒ¨ç½²ã€ã‚„ã€Œäººã¨äººã€ã‚’æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆPMï¼‰ã®ä½“ç³»åŒ–</strong><br>è‡ªåˆ†ã®èª¿æ•´åŠ›ã‚’ã€PMBOKãªã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ç…§ã‚‰ã—åˆã‚ã›ã€ã€Œå±äººçš„ãªã‚¹ã‚­ãƒ«ã€ã‹ã‚‰ã€Œä½“ç³»çš„ãªæ‰‹æ³•ã€ã¸æ˜‡è¯ã•ã›ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.3] ã€Œç¿»è¨³è€…ã€ã¨ã—ã¦ã®ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°</strong><br>å–¶æ¥­ã¨é–‹ç™ºã€çµŒå–¶ã¨ç¾å ´ãªã©ã€è¨€è‘‰ãŒé€šã˜ã«ãã„éƒ¨ç½²ã®é–“ã«å…¥ã‚Šã€é€šè¨³ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹å®Ÿç¸¾ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚"
                ],
                roadmap: ["COOï¼ˆæœ€é«˜åŸ·è¡Œè²¬ä»»è€…ï¼‰", "Chief of Staffï¼ˆçµŒå–¶ä¼ç”»ãƒ»ç¤¾é•·å®¤é•·ï¼‰", "å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"],
                onepoint: "ã€Œä½•ã§ã‚‚ã§ãã¾ã™ã€ã¯ã€Œä½•ã‚‚ã§ãã¾ã›ã‚“ã€ã¨å–ã‚‰ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã€Œç§ã¯ã€è¤‡é›‘ãªåˆ©å®³é–¢ä¿‚ã‚’èª¿æ•´ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Œé‚ã•ã›ã‚‹ãƒ—ãƒ­ã§ã™ã€ã¨ã€æ©Ÿèƒ½ï¼ˆFunctionï¼‰ã¨ã—ã¦ã®å¼·ã¿ã‚’å®šç¾©ã—ã¦ãã ã•ã„ã€‚"
            }
        };

        // --- ä¿å­˜ç”¨ã‚­ãƒ¼ã¨çŠ¶æ…‹ç®¡ç† ---
        const STORAGE_KEY = 'kotora_career_diagnosis_v2'; 
        let currentQuestion = 0;
        let answers = {};
        let scores = {};

        // --- åˆæœŸåŒ– ---
        document.addEventListener('DOMContentLoaded', () => {
            initStorageCheck(); // å±¥æ­´ç¢ºèª
            
            document.getElementById('startBtn').addEventListener('click', startDiagnosis);
            document.getElementById('restartBtn').addEventListener('click', startDiagnosis);
            document.getElementById('resumeBtn').addEventListener('click', restorePreviousResult);
            
            document.getElementById('prevBtn').addEventListener('click', prevQuestion);
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('retryBtn').addEventListener('click', () => location.reload());
        });

        // --- ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ãƒ˜ãƒ«ãƒ‘ãƒ¼ ---
        function getStorageData() {
            try {
                const data = localStorage.getItem(STORAGE_KEY);
                return data ? JSON.parse(data) : { latest: null, actions: {} };
            } catch (e) {
                console.error("Storage Error:", e);
                return { latest: null, actions: {} };
            }
        }

        function saveStorageData(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        // --- åˆæœŸè¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒªãƒ”ãƒ¼ã‚¿ãƒ¼åˆ¤å®šï¼‰ ---
        function initStorageCheck() {
            const data = getStorageData();
            
            // æœ€æ–°ã®çµæœå±¥æ­´ãŒå­˜åœ¨ã™ã‚‹å ´åˆ
            if (data.latest && data.latest.type) {
                const welcomeSection = document.getElementById('welcomeSection');
                const introSection = document.getElementById('introSection');
                
                // UIè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
                welcomeSection.style.display = 'block';
                introSection.style.display = 'none';
                
                // å‰å›ã®çµæœæƒ…å ±ã‚’åŸ‹ã‚è¾¼ã¿
                document.getElementById('lastResultType').textContent = data.latest.type;
                if (data.latest.date) {
                    const d = new Date(data.latest.date);
                    document.getElementById('lastDate').textContent = `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()}`;
                } else {
                    document.getElementById('lastDate').textContent = "ä¸æ˜";
                }
            }
        }

        // --- ç”»é¢é·ç§»ãƒ»æ“ä½œç³» ---
        function startDiagnosis() {
            document.getElementById('page-start').classList.remove('active');
            document.getElementById('page-questions').classList.add('active');
            showQuestion(0);
        }

        function restorePreviousResult() {
            const data = getStorageData();
            if (data.latest && data.latest.type) {
                const typeName = data.latest.type;
                
                // çµæœç”»é¢ã¸ãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆ
                document.getElementById('resultType').textContent = typeName;
                document.getElementById('resultDescription').textContent = TYPE_INFO[typeName];
                
                // è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã¨ToDoã®å¾©å…ƒ
                displayDetailReport(typeName);
                
                // ç”»é¢é·ç§»ï¼ˆè³ªå•ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰
                document.getElementById('page-start').classList.remove('active');
                document.getElementById('page-results').classList.add('active');
            } else {
                alert("ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æœ€åˆã‹ã‚‰è¨ºæ–­ã—ã¦ãã ã•ã„ã€‚");
                startDiagnosis();
            }
        }

        function showQuestion(index) {
            currentQuestion = index;
            const q = questions[index];
            const container = document.getElementById('questionContainer');
            const inputType = q.type === 'checkbox' ? 'checkbox' : 'radio';
            const inputName = `question_${q.id}`;
            
            let html = `<div class="question-title">Q${index + 1}. ${q.text}</div>`;
            if (inputType === 'checkbox') html += `<div class="question-note">âœ“ è¤‡æ•°é¸æŠå¯</div>`;
            
            q.options.forEach((option, i) => {
                const isChecked = checkIfSelected(q.id, i, inputType);
                const selectedClass = isChecked ? 'selected' : '';
                html += `
                    <div class="option ${selectedClass}" data-question="${index}" data-option="${i}">
                        <input type="${inputType}" name="${inputName}" value="${i}" id="q${q.id}_opt${i}" ${isChecked ? 'checked' : ''}>
                        <span>${option.text}</span>
                    </div>`;
            });
            
            container.innerHTML = html;
            
            container.querySelectorAll('.option').forEach(optionEl => {
                optionEl.addEventListener('click', handleOptionClick);
            });
            
            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `è³ªå• ${index + 1} / ${questions.length}`;
            
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').textContent = index === questions.length - 1 ? 'è¨ºæ–­çµæœã¸' : 'æ¬¡ã¸';
        }

        function checkIfSelected(qId, optIndex, inputType) {
            if (!answers[qId]) return false;
            if (inputType === 'checkbox') return answers[qId].includes(optIndex);
            return answers[qId] === optIndex;
        }

        function handleOptionClick(e) {
            const qIndex = parseInt(this.dataset.question);
            const optIndex = parseInt(this.dataset.option);
            const q = questions[qIndex];
            const inputType = q.type === 'checkbox' ? 'checkbox' : 'radio';
            const checkbox = this.querySelector('input');
            
            if (inputType === 'checkbox') {
                if (!answers[q.id]) answers[q.id] = [];
                const idx = answers[q.id].indexOf(optIndex);
                if (idx > -1) {
                    answers[q.id].splice(idx, 1);
                    checkbox.checked = false;
                    this.classList.remove('selected');
                } else {
                    answers[q.id].push(optIndex);
                    checkbox.checked = true;
                    this.classList.add('selected');
                }
            } else {
                answers[q.id] = optIndex;
                checkbox.checked = true;
                this.parentElement.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) showQuestion(currentQuestion - 1);
        }

        function nextQuestion() {
            const q = questions[currentQuestion];
            if (!validateAnswer(q)) {
                alert('é¸æŠè‚¢ã‚’1ã¤ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            if (currentQuestion < questions.length - 1) {
                showQuestion(currentQuestion + 1);
            } else {
                calculateAndShowResult();
            }
        }

        function validateAnswer(q) {
            if (q.type === 'checkbox') return answers[q.id] && answers[q.id].length > 0;
            return answers[q.id] !== undefined;
        }

        // --- çµæœåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ ---
        function calculateAndShowResult() {
            scores = {};
            questions.forEach(q => {
                const ans = answers[q.id];
                if (ans === undefined) return;
                const selectedOptions = Array.isArray(ans) ? ans : [ans];
                selectedOptions.forEach(optIndex => {
                    const optScores = q.options[optIndex].scores;
                    for (const key in optScores) scores[key] = (scores[key] || 0) + optScores[key];
                });
            });

            const resultType = determineType(scores);
            
            // --- ã“ã“ã§çµæœã‚’ä¿å­˜ ---
            const data = getStorageData();
            data.latest = {
                type: resultType,
                date: new Date().getTime()
            };
            saveStorageData(data);
            // ---------------------

            document.getElementById('resultType').textContent = resultType;
            document.getElementById('resultDescription').textContent = TYPE_INFO[resultType];
            displayDetailReport(resultType);
            document.getElementById('page-questions').classList.remove('active');
            document.getElementById('page-results').classList.add('active');
        }

        function determineType(s) {
            const get = (key) => s[key] || 0;
            if (get('leadership') + get('strategy') + get('management') >= 13) return "æˆ¦ç•¥æ€è€ƒå‹ãƒªãƒ¼ãƒ€ãƒ¼";
            if (get('finance') + get('analytical') >= 7) return "é‡‘èã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ";
            if (get('consulting') + get('strategy') >= 8) return "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«";
            if (get('it') + get('innovation') >= 7) return "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»DXãƒªãƒ¼ãƒ€ãƒ¼";
            if (get('specialist') >= 8) return "å°‚é–€æ€§è¿½æ±‚å‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ";
            if (get('communication') + get('negotiation') >= 8) return "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¿—å‘å‹ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«";
            if ((get('leadership') + get('versatility') >= 9) || (get('entrepreneurship') >= 5)) return "äº‹æ¥­å¤‰é©ãƒªãƒ¼ãƒ€ãƒ¼";
            return "ãƒãƒ«ãƒã‚¿ãƒ¬ãƒ³ãƒˆå‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ";
        }

        // --- è©³ç´°è³‡æ–™è¡¨ç¤º ï¼† ToDoãƒªã‚¹ãƒˆæ©Ÿèƒ½ ---
        function displayDetailReport(resultType) {
            const reportData = detailReports[resultType];
            if (!reportData) return;
            
            document.getElementById('detailTitle').textContent = resultType;
            document.getElementById('detailSubtitle').textContent = reportData.subtitle;
            document.getElementById('marketValue').textContent = reportData.marketValue;
            
            // ToDoãƒªã‚¹ãƒˆç”Ÿæˆ & ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
            const nextActionsUl = document.getElementById('nextActions');
            nextActionsUl.innerHTML = '';
            
            // ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const data = getStorageData();
            const savedChecks = data.actions[resultType] || []; // ã“ã®ã‚¿ã‚¤ãƒ—ã®ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹é…åˆ—
            
            // ãƒªã‚¹ãƒˆç”Ÿæˆ
            reportData.nextActions.forEach((action, index) => {
                const isChecked = savedChecks[index] ? true : false;
                const li = document.createElement('li');
                li.className = isChecked ? 'todo-item completed' : 'todo-item';
                
                li.innerHTML = `
                    <input type="checkbox" class="todo-checkbox" ${isChecked ? 'checked' : ''}>
                    <label class="todo-label">${action}</label>
                `;
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆä¿å­˜å‡¦ç†ï¼‰
                li.addEventListener('click', function(e) {
                    if (e.target.tagName !== 'INPUT') {
                        const checkbox = this.querySelector('input');
                        checkbox.checked = !checkbox.checked;
                    }
                    
                    const checkbox = this.querySelector('input');
                    const newState = checkbox.checked;
                    
                    if (newState) {
                        this.classList.add('completed');
                    } else {
                        this.classList.remove('completed');
                    }
                    
                    // ä¿å­˜å‡¦ç†
                    saveActionState(resultType, index, newState);
                    
                    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
                    updateProgressBar(resultType, reportData.nextActions.length);
                });
                
                nextActionsUl.appendChild(li);
            });
            
            // åˆå›ã®ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼è¨ˆç®—
            updateProgressBar(resultType, reportData.nextActions.length);
            
            // ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
            const roadmapUl = document.getElementById('roadmap');
            roadmapUl.innerHTML = '';
            reportData.roadmap.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                roadmapUl.appendChild(li);
            });
            
            document.getElementById('onepoint').textContent = reportData.onepoint;
        }

        // ToDoãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹é–¢æ•°
        function saveActionState(type, index, isChecked) {
            const data = getStorageData();
            if (!data.actions[type]) data.actions[type] = [];
            
            data.actions[type][index] = isChecked;
            saveStorageData(data);
        }

        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateProgressBar(type, totalItems) {
            const data = getStorageData();
            const checks = data.actions[type] || [];
            
            let completedCount = 0;
            for(let i=0; i<totalItems; i++) {
                if(checks[i]) completedCount++;
            }
            
            const percentage = Math.round((completedCount / totalItems) * 100);
            
            document.getElementById('actionPercent').textContent = `${percentage}%`;
            document.getElementById('actionBar').style.width = `${percentage}%`;
        }
    </script>
</body>
</html>