<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚­ãƒ£ãƒªã‚¢è¨ºæ–­ãƒ„ãƒ¼ãƒ« | æ ªå¼ä¼šç¤¾ã‚³ãƒˆãƒ©</title>
    
    <!-- PWAè¨­å®š -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ã‚­ãƒ£ãƒªã‚¢è¨ºæ–­">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#f5f7fa">

    <!-- ç´™å¹é›ªç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ•°ã®å®šç¾© --- */
        :root {
            --ease-out-quint: cubic-bezier(0.23, 1, 0.32, 1);
            --ease-elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
            line-height: 1.6; color: #333;
            background: #f5f7fa;
            min-height: 100vh; padding: 20px;
            overflow-x: hidden;
        }
        .container { max-width: 600px; margin: 0 auto; position: relative; min-height: 100vh; }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header { 
            background: rgba(255,255,255,0.9); backdrop-filter: blur(10px);
            padding: 15px; margin-bottom: 20px; border-radius: 16px; 
            text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            position: sticky; top: 10px; z-index: 100;
            display: flex; justify-content: center; align-items: center;
            height: 70px; 
        }
        
        header img { 
            height: 32px; 
            width: auto;
            max-width: 100%;
            object-fit: contain; 
            display: block; 
        }

        /* ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .card {
            background: #fff; border-radius: 20px; padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08); margin-bottom: 30px;
            position: relative; overflow: hidden;
            transition: height 0.3s var(--ease-out-quint);
        }
        h2 { color: #003d7a; font-size: 24px; margin-bottom: 20px; text-align: center; font-weight: 800; }
        
        /* --- ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ --- */
        .btn, .btn-nav, .option, .todo-item, .register-btn {
            transition: all 0.2s var(--ease-out-quint), transform 0.1s var(--ease-out-quint);
            cursor: pointer;
        }
        .btn:active, .btn-nav:active, .option:active, .todo-item:active, .register-btn:active {
            transform: scale(0.96) !important; opacity: 0.9;
        }

        /* ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ */
        .btn {
            display: block; width: 100%; padding: 18px;
            background: var(--primary-gradient);
            color: #fff; text-align: center; border-radius: 50px;
            font-size: 18px; font-weight: bold; border: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .btn:hover { box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5); transform: translateY(-2px); }

        /* ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .welcome-back-section {
            background: #f0f7ff; border: 2px solid #667eea; border-radius: 16px;
            padding: 25px; text-align: center; margin-bottom: 20px;
            animation: popIn 0.5s var(--ease-elastic);
        }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .btn-secondary {
            background: #fff; color: #666; border: 2px solid #e0e0e0;
            box-shadow: none; margin-top: 15px; font-size: 15px; padding: 15px;
        }

        /* --- ç”»é¢é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ --- */
        .page { display: none; width: 100%; }
        .page.active { display: block; }

        .slide-in-right { animation: slideInRight 0.5s var(--ease-out-quint) forwards; }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px) scale(0.95); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }

        /* è³ªå•ã‚«ãƒ¼ãƒ‰é·ç§» */
        .question-wrapper { position: relative; }
        .question-content { transition: opacity 0.3s ease; }
        
        .fade-out-left { animation: fadeOutLeft 0.3s var(--ease-out-quint) forwards; }
        @keyframes fadeOutLeft { to { opacity: 0; transform: translateX(-30px); } }
        
        .fade-in-right { animation: fadeInRight 0.4s var(--ease-out-quint) forwards; }
        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
        .progress-container { margin-bottom: 30px; }
        .progress-bar { width: 100%; height: 6px; background: #eee; border-radius: 10px; overflow: hidden; margin-bottom: 8px; }
        .progress-fill { height: 100%; background: var(--primary-gradient); width: 0%; transition: width 0.6s var(--ease-out-quint); }
        
        /* é¸æŠè‚¢ */
        .option { 
            display: flex; align-items: center; padding: 16px 20px; 
            background: #f8f9fa; border: 2px solid transparent; border-radius: 12px; 
            margin-bottom: 12px;
        }
        .option.selected { 
            background: #eef2ff; border-color: #667eea; 
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15); 
        }
        .option input { margin-right: 15px; transform: scale(1.3); accent-color: #667eea; }
        .option span { font-weight: 500; font-size: 16px; }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
        .navigation-buttons { display: flex; gap: 15px; margin-top: 30px; }
        .btn-nav { 
            flex: 1; padding: 15px; background: #fff; color: #667eea; 
            border: 2px solid #667eea; border-radius: 50px; font-weight: bold; font-size: 16px;
        }
        .btn-nav:disabled { opacity: 0.3; cursor: default; transform: none !important; }
        .btn-nav:hover:not(:disabled) { background: #eef2ff; }
        #nextBtn { background: #667eea; color: #fff; }
        #nextBtn:hover { background: #5a6fd6; }

        /* çµæœç”»é¢æ¼”å‡º */
        .stagger-item { opacity: 0; transform: translateY(20px); }
        .stagger-visible { animation: fadeInUp 0.6s var(--ease-out-quint) forwards; }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .result-preview { 
            text-align: center; padding: 30px 20px; 
            background: linear-gradient(180deg, #fff 0%, #fff8f0 100%); 
            border-radius: 16px; margin: 20px 0; 
            border: 2px solid #ffeeba; 
        }
        .result-type { font-size: 28px; font-weight: 800; color: #d35400; margin: 15px 0; line-height: 1.3; }

        /* ToDoãƒªã‚¹ãƒˆ */
        .todo-item {
            display: flex; align-items: flex-start; padding: 15px;
            margin-bottom: 12px; border: 1px solid #eee; border-radius: 12px;
            background-color: #fff; line-height: 1.6;
        }
        .todo-item.completed { background-color: #f0fdf4; border-color: #86efac; }
        .todo-checkbox { margin-top: 4px; margin-right: 12px; min-width: 20px; height: 20px; accent-color: #22c55e; cursor: pointer; }
        .todo-item strong { color: #003d7a; font-weight: 700; display: block; margin-bottom: 4px; }
        .todo-item span { font-size: 14px; color: #444; }

        .todo-progress-area { padding: 20px; background: #f8fafc; border-radius: 12px; margin-bottom: 20px; }
        .todo-progress-bar-bg { height: 12px; background: #e2e8f0; border-radius: 6px; overflow: hidden; margin-top: 8px; }
        .todo-progress-bar-fill { height: 100%; background: #22c55e; width: 0%; transition: width 1s var(--ease-out-quint); }

        /* è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ« */
        .detail-report { display: none; margin-top: 30px; }
        .detail-subtitle { text-align: center; font-size: 15px; color: #667eea; font-weight: bold; margin-bottom: 25px; }
        .report-section-title { 
            color:#003d7a; border-bottom:2px solid #eee; padding-bottom:10px; margin-bottom:15px; 
            font-size: 18px; font-weight: bold;
        }

        /* ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ç”¨ãƒªã‚¹ãƒˆ */
        .roadmap-list { list-style: none; padding: 0; margin-left: 5px; }
        .roadmap-list li { margin-bottom: 12px; color: #444; padding-left: 25px; position: relative; font-weight: 500; }
        .roadmap-list li::before { content: "ğŸ“"; position: absolute; left: 0; top: 0; }

        .register-btn { 
            text-decoration: none; display: block; padding: 18px; 
            background: var(--primary-gradient); color: #fff; border-radius: 50px; 
            text-align: center; font-weight: bold; font-size: 16px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .register-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5); }

        footer { text-align: center; margin-top: 40px; color: #999; font-size: 12px; padding-bottom: 20px;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="logo.png" alt="KOTORA" width="140" height="32">
        </header>

        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div id="page-start" class="page active">
            <div class="card">
                <h2>ğŸ¯ ã‚­ãƒ£ãƒªã‚¢è¨ºæ–­</h2>
                
                <div id="welcomeSection" class="welcome-back-section" style="display:none;">
                    <p style="font-size:14px; color:#003d7a; font-weight:bold;">ãŠã‹ãˆã‚Šãªã•ã„</p>
                    <div style="font-size:13px; color:#666; margin:10px 0;">
                        å‰å›: <span id="lastDate"></span>
                    </div>
                    <div class="result-type" id="lastResultType" style="font-size:20px; margin:5px 0;"></div>
                    <button class="btn" id="resumeBtn" style="margin-top:15px;">å‰å›ã®ç¶šãã‚’è¦‹ã‚‹</button>
                    <button class="btn btn-secondary" id="restartBtn">æ–°ã—ãè¨ºæ–­ã™ã‚‹</button>
                </div>

                <div id="introSection">
                    <div style="text-align: center; margin-bottom: 30px; color: #666; font-size: 15px;">
                        <p>8ã¤ã®è³ªå•ã§ã‚ãªãŸã®å¼·ã¿ã‚’åˆ†æã€‚</p>
                        <p>å¸‚å ´ä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹æˆ¦ç•¥ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚</p>
                    </div>
                    <button class="btn" id="startBtn">è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- è³ªå•ç”»é¢ -->
        <div id="page-questions" class="page">
            <div class="card">
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                    <div style="text-align: center; font-size: 12px; color: #999; font-weight:bold;" id="progressText">Q1 / 8</div>
                </div>
                
                <div class="question-wrapper">
                    <div id="questionContainer" class="question-content"></div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn-nav" id="prevBtn" disabled>æˆ»ã‚‹</button>
                    <button class="btn-nav" id="nextBtn">æ¬¡ã¸</button>
                </div>
            </div>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="page-results" class="page">
            <div class="card">
                <div id="resultContent">
                    <h2 class="stagger-item">âœ¨ è¨ºæ–­çµæœ</h2>
                    
                    <div class="result-preview stagger-item" style="animation-delay: 0.1s;">
                        <p style="color: #666; font-size:14px;">ã‚ãªãŸã®ã‚­ãƒ£ãƒªã‚¢ã‚¿ã‚¤ãƒ—</p>
                        <div class="result-type" id="resultType">...</div>
                        <p id="resultDescription" style="line-height: 1.6; color: #555; font-size:14px; margin-top: 10px;"></p>
                    </div>
                    
                    <div class="stagger-item" style="animation-delay: 0.2s; margin-top:20px;">
                        <a href="https://www.kotora.jp/service/tenshoku_entry.php?utm_source=tool&utm_medium=tool&utm_campaign=note_carrierdiagnostictool" class="register-btn" target="_blank">è©³ç´°ãªæƒ…å ±åé›†ã‚’å§‹ã‚ã‚‹</a>
                        <p style="text-align:center; font-size:12px; color:#999; margin-top:8px;">ã‚³ãƒˆãƒ©å…¬å¼ã‚µã‚¤ãƒˆã¸ç§»å‹•ã—ã¾ã™</p>
                    </div>

                    <div id="detailReport" class="detail-report">
                        <!-- ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ« -->
                        <div class="stagger-item" style="animation-delay: 0.25s;">
                            <p id="detailSubtitle" class="detail-subtitle"></p>
                        </div>

                        <!-- å¸‚å ´ä¾¡å€¤ -->
                        <div class="stagger-item" style="animation-delay: 0.3s;">
                            <h3 class="report-section-title">ğŸ“ˆ å¸‚å ´ä¾¡å€¤</h3>
                            <p id="marketValue" style="font-size:14px; color:#444;"></p>
                        </div>

                        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆ -->
                        <div class="stagger-item" style="animation-delay: 0.4s; margin-top:30px;">
                            <h3 class="report-section-title">ğŸš€ ãƒã‚¯ã‚¹ãƒˆãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
                            <div class="todo-progress-area">
                                <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:14px; color:#003d7a;">
                                    <span>é”æˆåº¦</span>
                                    <span id="actionPercent">0%</span>
                                </div>
                                <div class="todo-progress-bar-bg">
                                    <div id="actionBar" class="todo-progress-bar-fill"></div>
                                </div>
                            </div>
                            <div id="nextActions"></div>
                        </div>

                        <!-- ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— -->
                        <div class="stagger-item" style="animation-delay: 0.5s; margin-top:30px;">
                            <h3 class="report-section-title">ğŸ—º ã‚­ãƒ£ãƒªã‚¢ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h3>
                            <ul id="roadmap" class="roadmap-list"></ul>
                        </div>

                        <!-- ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆ -->
                        <div class="stagger-item" style="animation-delay: 0.6s; margin-top:30px;">
                            <h3 class="report-section-title">ğŸ’¡ ã‚³ãƒˆãƒ©ã‹ã‚‰ã®ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆ</h3>
                            <p id="onepoint" style="font-size:14px; color:#444; background:#f0f7ff; padding:15px; border-radius:8px; border:1px solid #d0e1f5;"></p>
                        </div>

                        <!-- ä¸‹éƒ¨ç™»éŒ²ãƒœã‚¿ãƒ³ -->
                        <div class="stagger-item" style="animation-delay: 0.7s; margin-top:40px;">
                            <p class="register-microcopy" style="text-align:center; font-size:14px; color:#666; margin-bottom:10px;">æ¤œè¨ãŒé€²ã¿ã‚„ã™ããªã‚Šã¾ã™</p>
                            <a href="https://www.kotora.jp/service/tenshoku_entry.php?utm_source=tool&utm_medium=tool&utm_campaign=note_carrierdiagnostictool" class="register-btn" target="_blank">ç„¡æ–™ã§ç™»éŒ²ã—ã¦ã€æƒ…å ±åé›†ã‚’å§‹ã‚ã‚‹</a>
                        </div>
                        
                        <div class="stagger-item" style="animation-delay: 0.8s; margin-top:30px; text-align:center;">
                            <button class="btn-nav" id="retryBtn" style="width:auto; padding:10px 30px;">ã‚¿ã‚¤ãƒˆãƒ«ã¸æˆ»ã‚‹</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 KOTORA Co., Ltd.</p>
        </footer>
    </div>

    <script>
        // --- Service Workerç™»éŒ² ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js'));
        }

        // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
        const questions = [
            { id: 1, text: "ç¾åœ¨ã®è·ç¨®ã«è¿‘ã„ã®ã¯ï¼Ÿ", options: [
                { text: "é‡‘è", scores: { finance: 3, analytical: 1 } },
                { text: "ä¸å‹•ç”£", scores: { realestate: 3, negotiation: 1 } },
                { text: "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°", scores: { consulting: 3, strategy: 2 } },
                { text: "IT / DXã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", scores: { it: 3, technical: 2 } },
                { text: "è£½é€ æ¥­", scores: { manufacturing: 3, specialist: 1 } },
                { text: "çµŒå–¶å¹¹éƒ¨ãƒ»ç®¡ç†ç³»", scores: { leadership: 3, management: 2 } },
                { text: "ãã®ä»–", scores: { versatility: 1 } }
            ]},
            { id: 2, text: "ã‚­ãƒ£ãƒªã‚¢ã§é‡è¦–ã™ã‚‹ã“ã¨ã¯ï¼Ÿ", options: [
                { text: "å°‚é–€æ€§ã‚’æ·±ã‚ã‚‹", scores: { specialist: 3, technical: 2 } },
                { text: "ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãƒ»çµ±ç‡", scores: { leadership: 3, management: 2 } },
                { text: "å¹…åºƒã„çµŒé¨“", scores: { generalist: 3, versatility: 2 } },
                { text: "ç¤¾ä¼šçš„ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ", scores: { impact: 3, strategy: 2 } }
            ]},
            { id: 3, text: "ã‚„ã‚ŠãŒã„ã‚’æ„Ÿã˜ã‚‹ç¬é–“ã¯ï¼Ÿ", options: [
                { text: "é›£å•ã‚’è«–ç†çš„ã«è§£æ±º", scores: { analytical: 3, problem_solving: 2 } },
                { text: "ãƒãƒ¼ãƒ ã§æˆæœã‚’å‡ºã™", scores: { leadership: 3, teamwork: 2 } },
                { text: "æ–°ã—ã„ä»•çµ„ã¿ã‚’å‰µã‚‹", scores: { strategy: 3, innovation: 2 } },
                { text: "é¡§å®¢ã«æ„Ÿè¬ã•ã‚Œã‚‹", scores: { communication: 3, client_focus: 2 } }
            ]},
            { id: 4, text: "æœ€ã‚‚å¾—æ„ãªã‚¹ã‚­ãƒ«ã¯ï¼Ÿ", options: [
                { text: "ãƒ‡ãƒ¼ã‚¿ãƒ»å®šé‡åˆ†æ", scores: { analytical: 3, technical: 2 } },
                { text: "æˆ¦ç•¥ç«‹æ¡ˆãƒ»ä¼ç”»", scores: { strategy: 3, planning: 2 } },
                { text: "å¯¾äººæŠ˜è¡ãƒ»äº¤æ¸‰", scores: { communication: 3, negotiation: 2 } },
                { text: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†", scores: { management: 3, execution: 2 } }
            ]},
            { id: 5, text: "ç†æƒ³çš„ãªåƒãæ–¹ã¯ï¼Ÿ", options: [
                { text: "1ã¤ã®ãƒ†ãƒ¼ãƒã«æ²¡é ­", scores: { specialist: 2, focus: 2 } },
                { text: "è¤‡æ•°ã‚’åŒæ™‚é€²è¡Œ", scores: { versatility: 2, multitasking: 2 } },
                { text: "ãƒãƒ¼ãƒ ã§å”åŠ›", scores: { teamwork: 3, collaboration: 2 } },
                { text: "å€‹äººã®è£é‡ã§è‡ªç”±", scores: { autonomy: 3, independence: 2 } }
            ]},
            { id: 6, text: "è»¢è·ã§å®Ÿç¾ã—ãŸã„ã“ã¨ã¯ï¼Ÿ", options: [
                { text: "å¹´åã‚¢ãƒƒãƒ—", scores: { ambition: 2, finance: 1 } },
                { text: "æ˜‡é€²ãƒ»ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—", scores: { leadership: 2, ambition: 3 } },
                { text: "æ–°ã‚¹ã‚­ãƒ«ç²å¾—", scores: { growth: 3, learning: 2 } },
                { text: "ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹", scores: { balance: 3, wellbeing: 2 } }
            ]},
            { id: 7, text: "èˆˆå‘³ã®ã‚ã‚‹ä¼æ¥­ã‚¿ã‚¤ãƒ—ã¯ï¼Ÿ", type: "checkbox", options: [
                { text: "å¤–è³‡ç³»ä¼æ¥­", scores: { global: 2, versatility: 1 } },
                { text: "æ—¥ç³»å¤§æ‰‹ä¼æ¥­", scores: { corporate: 2, stability: 1 } },
                { text: "ãƒ™ãƒ³ãƒãƒ£ãƒ¼", scores: { entrepreneurship: 2, innovation: 1 } },
                { text: "ã‚³ãƒ³ã‚µãƒ«ãƒ•ã‚¡ãƒ¼ãƒ ", scores: { consulting: 2, strategy: 1 } },
                { text: "PEãƒ•ã‚¡ãƒ³ãƒ‰ãƒ»æŠ•è³‡", scores: { finance: 2, analytical: 1 } },
                { text: "äº‹æ¥­ä¼šç¤¾ï¼ˆä¼ç”»ãƒ»DXï¼‰", scores: { management: 2, it: 1 } }
            ]},
            { id: 8, text: "5å¹´å¾Œã®ç†æƒ³åƒã¯ï¼Ÿ", options: [
                { text: "ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã¨ã—ã¦èªçŸ¥", scores: { specialist: 3, expertise: 3 } },
                { text: "çµŒå–¶å±¤ã¨ã—ã¦æ´»èº", scores: { leadership: 3, management: 3 } },
                { text: "èµ·æ¥­ãƒ»ç‹¬ç«‹", scores: { entrepreneurship: 3, autonomy: 2 } },
                { text: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«æ´»èº", scores: { global: 3, versatility: 2 } }
            ]}
        ];

        const TYPE_INFO = {
            "æˆ¦ç•¥æ€è€ƒå‹ãƒªãƒ¼ãƒ€ãƒ¼": "æˆ¦ç•¥çš„æ€è€ƒåŠ›ã¨ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’å…¼ã­å‚™ãˆãŸã‚¿ã‚¤ãƒ—ã€‚çµ„ç¹”ã‚’ç‡ã„ã¦å¤§ããªæˆæœã‚’ç”Ÿã¿å‡ºã™ã“ã¨ãŒå¾—æ„ã§ã™ã€‚çµŒå–¶å±¤ã‚„ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆè·ã§çœŸä¾¡ã‚’ç™ºæ®ã§ãã¾ã™ã€‚",
            "é‡‘èã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ": "é‡‘èçŸ¥è­˜ã¨åˆ†æåŠ›ã«å„ªã‚ŒãŸã‚¿ã‚¤ãƒ—ã€‚é«˜åº¦ãªé‡‘èå°‚é–€æ€§ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹åˆ†é‡ã§æ´»èºã§ãã¾ã™ã€‚æŠ•è³‡éŠ€è¡Œã€PEãƒ•ã‚¡ãƒ³ãƒ‰ã€è²¡å‹™ä¼ç”»ãªã©ãŒé©è·ã§ã™ã€‚",
            "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": "æˆ¦ç•¥ç«‹æ¡ˆã¨å•é¡Œè§£æ±ºã«é•·ã‘ãŸã‚¿ã‚¤ãƒ—ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®çµŒå–¶èª²é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã¾ã™ã€‚æˆ¦ç•¥ã‚³ãƒ³ã‚µãƒ«ã‚„ãƒ“ã‚¸ãƒã‚¹ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã«æœ€é©ã§ã™ã€‚",
            "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»DXãƒªãƒ¼ãƒ€ãƒ¼": "æŠ€è¡“åŠ›ã¨ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å¿—å‘ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«å¤‰é©ã‚’æ¨é€²ã—ã€äº‹æ¥­æˆé•·ã«è²¢çŒ®ã§ãã¾ã™ã€‚CTOã€DXæ¨é€²è²¬ä»»è€…ã€ãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ‰ãªã©ã§æ´»èºã§ãã¾ã™ã€‚",
            "å°‚é–€æ€§è¿½æ±‚å‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ": "ç‰¹å®šé ˜åŸŸã®å°‚é–€æ€§ã‚’æ·±ã‚ã‚‹ã“ã¨ã«æƒ…ç†±ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚ãã®é“ã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã¨ã—ã¦æ´»èºã—ã¾ã™ã€‚å°‚é–€è·ã€ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆãƒã‚¸ã‚·ãƒ§ãƒ³ã§å¼·ã¿ã‚’ç™ºæ®ã§ãã¾ã™ã€‚",
            "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¿—å‘å‹ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": "å„ªã‚ŒãŸã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŠ›ã¨æŠ˜è¡åŠ›ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚ä¿¡é ¼é–¢ä¿‚ã‚’æ§‹ç¯‰ã—æœ€é©ãªææ¡ˆãŒã§ãã¾ã™ã€‚å–¶æ¥­ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µã‚¯ã‚»ã‚¹ãªã©ã«å‘ã„ã¦ã„ã¾ã™ã€‚",
            "äº‹æ¥­å¤‰é©ãƒªãƒ¼ãƒ€ãƒ¼": "å¤‰é©ã‚’æ¨é€²ã™ã‚‹å®Ÿè¡ŒåŠ›ã‚’æŒã¤ã‚¿ã‚¤ãƒ—ã€‚æ–°è¦äº‹æ¥­ã‚„ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ–ãƒ«ãªç’°å¢ƒã§åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã€æ–°è¦äº‹æ¥­é–‹ç™ºã€äº‹æ¥­å†ç”Ÿãªã©ãŒé©è·ã§ã™ã€‚",
            "ãƒãƒ«ãƒã‚¿ãƒ¬ãƒ³ãƒˆå‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ": "å¹…åºƒã„çŸ¥è­˜ã¨ã‚¹ã‚­ãƒ«ã‚’æŒã¡ã€æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ã‚¿ã‚¤ãƒ—ã€‚å¤šæ§˜ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¨ªæ–­çš„ã«æ´»èºã—ã¾ã™ã€‚äº‹æ¥­ä¼ç”»ã€çµŒå–¶ä¼ç”»ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãªã©ã§å¼·ã¿ã‚’ç™ºæ®ã§ãã¾ã™ã€‚"
        };

        const detailReports = {
            "æˆ¦ç•¥æ€è€ƒå‹ãƒªãƒ¼ãƒ€ãƒ¼": {
                subtitle: "ã€œçµ„ç¹”ã‚’å‹åˆ©ã«å°ãã€çµŒå–¶ã®ç¾…é‡ç›¤ã€œ",
                marketValue: "ä¸ç¢ºå®Ÿæ€§ã®é«˜ã„ç¾ä»£ã«ãŠã„ã¦ã€ãƒ•ã‚¡ã‚¯ãƒˆã«åŸºã¥ãè«–ç†çš„ã«é€²ã‚€ã¹ãé“ã‚’ç¤ºã›ã‚‹äººæã¯å¸Œå°‘ã§ã™ã€‚ç‰¹ã«ã€Œäººã‚’å‹•ã‹ã™ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€ã‚’å…¼ã­å‚™ãˆã¦ã„ã‚‹ç‚¹ã§ã€CxOå€™è£œã¨ã—ã¦ã®å¸‚å ´ä¾¡å€¤ãŒéå¸¸ã«é«˜ã„çŠ¶æ…‹ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ã€Œæ„æ€æ±ºå®šã€ã®è¨€èªåŒ–</strong><br>ãƒãƒ¼ãƒ ã«å¯¾ã—ã¦ã€çµè«–ã ã‘ã§ãªãã€Œãªãœãã®åˆ¤æ–­ã«è‡³ã£ãŸã‹ã€ã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’å…±æœ‰ã™ã‚‹é »åº¦ã‚’ä¸Šã’ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.2] éé€£ç¶šãªæˆé•·ã®æ¨¡ç´¢</strong><br>æ—¢å­˜äº‹æ¥­ã®å»¶é•·ç·šï¼ˆæ”¹å–„ï¼‰ã§ã¯ãªãã€å…¨ãæ–°ã—ã„åç›Šæºã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ï¼ˆæ”¹é©ï¼‰ã‚’æ§‹æƒ³ã™ã‚‹æ™‚é–“ã‚’é€±ã«1æ™‚é–“ã¯ç¢ºä¿ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] åå¯¾æ„è¦‹ã®å¸å</strong><br>è‡ªåˆ†ã®æ„è¦‹ã«åå¯¾ã—ãã†ãªãƒ¡ãƒ³ãƒãƒ¼ã¨1å¯¾1ã§è©±ã—ã€æ‡¸å¿µç‚¹ã‚’èãå‡ºã™æ™‚é–“ã‚’ä½œã£ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["äº‹æ¥­è²¬ä»»è€…ï¼ˆBusiness Unit Headï¼‰", "CSOï¼ˆæœ€é«˜æˆ¦ç•¥è²¬ä»»è€…ï¼‰", "çµŒå–¶ä¼ç”»éƒ¨é•·"],
                onepoint: "é¢æ¥ã§ã¯ã€Œæˆ¦ç•¥ã®ç¾ã—ã•ã€ã‚ˆã‚Šã‚‚ã€Œæ³¥è‡­ã„å®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚ºã§ã€æŠµæŠ—å‹¢åŠ›ã‚’ã©ã†èª¬å¾—ã—ãŸã‹ã€ã¨ã„ã†äººé–“çš„ãªèª¿æ•´åŠ›ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãŒé«˜ãè©•ä¾¡ã•ã‚Œã¾ã™ã€‚"
            },
            "é‡‘èã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ": {
                subtitle: "ã€œè³‡æœ¬ã®æµã‚Œã‚’èª­ã¿è§£ãã€ä¼æ¥­ä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹å‚è¬€ã€œ",
                marketValue: "æ•°å­—ã¨ã„ã†ä¸–ç•Œå…±é€šè¨€èªã‚’æ“ã‚Œã‚‹ã‚ãªãŸã¯ã€ã©ã®æ¥­ç•Œã§ã‚‚é‡å®ã•ã‚Œã¾ã™ã€‚ç‰¹ã«ã€ŒæŠ•è³‡å¯¾åŠ¹æœï¼ˆROIï¼‰ã€ã‚„ã€Œãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹æˆ¦ç•¥ã€è¦–ç‚¹ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€PEãƒ•ã‚¡ãƒ³ãƒ‰ã‚„CFOå€™è£œã¨ã—ã¦å¼•ãæ‰‹ã‚ã¾ãŸã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ãƒ“ã‚¸ãƒã‚¹ç†è§£ã®æ·±åŒ–</strong><br>æ•°å­—ã®è£å´ã«ã‚ã‚‹ã€Œç¾å ´ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚„ã€Œå•†æµã€ã‚’è§£åƒåº¦é«˜ãç†è§£ã™ã‚‹ã‚ˆã†åŠªã‚ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.2] ã‚¨ã‚¯ã‚¤ãƒ†ã‚£ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®æ§‹ç¯‰</strong><br>è‡ªç¤¾ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ãŒã€Œã©ã†ã™ã‚Œã°æ ªä¾¡ï¼ˆä¼æ¥­ä¾¡å€¤ï¼‰ãŒä¸ŠãŒã‚‹ã‹ã€ã‚’æŠ•è³‡å®¶ç›®ç·šã§èªã‚‹è¨“ç·´ã‚’ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] åˆ†æãƒ¬ãƒãƒ¼ãƒˆä½œæˆ</strong><br>æ‹…å½“åˆ†é‡ã«é–¢ã™ã‚‹åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’A4ãƒ»1æšã§ä½œæˆã—ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã™ã‚‹ç¿’æ…£ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["CFOï¼ˆæœ€é«˜è²¡å‹™è²¬ä»»è€…ï¼‰", "PEãƒ•ã‚¡ãƒ³ãƒ‰ / ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚­ãƒ£ãƒ”ã‚¿ãƒªã‚¹ãƒˆ", "M&Aã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒªãƒ¼"],
                onepoint: "ã€Œå®ˆã‚Šï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ»ç®¡ç†ï¼‰ã€ã ã‘ã§ãªãã€ã€Œæ”»ã‚ï¼ˆè³‡é‡‘èª¿é”ãƒ»M&Aãƒ»æŠ•è³‡ï¼‰ã€ã®çµŒé¨“ã‚’ç©ã‚ã‚‹ç’°å¢ƒã«èº«ã‚’ç½®ãã“ã¨ãŒã€ç†æƒ³ã®å¹´åã‚¢ãƒƒãƒ—ã‚’å®Ÿç¾ã™ã‚‹éµã§ã™ã€‚"
            },
            "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": {
                subtitle: "ã€œé›£å•ã‚’è§£æ±ºã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å¤‰é©ã‚’ã‚‚ãŸã‚‰ã™çŸ¥ã®å·¨äººã€œ",
                marketValue: "çŸ­æœŸé–“ã§æœ¬è³ªçš„ãªèª²é¡Œã‚’ç‰¹å®šã—ã€è§£æ±ºç­–ã‚’æç¤ºã™ã‚‹ã‚¹ã‚­ãƒ«ã¯å³æˆ¦åŠ›ã§ã™ã€‚DXã‚„ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£ãªã©æ­£è§£ã®ãªã„ãƒ†ãƒ¼ãƒã«ãŠã„ã¦ã€ã‚ãªãŸã®ã‚¹ã‚­ãƒ«ã¯ç‰¹ã«è¼ãã¾ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ãƒ­ã‚¸ãƒƒã‚¯ãƒ„ãƒªãƒ¼åˆ†è§£</strong><br>ä»ŠæŠ±ãˆã¦ã„ã‚‹èª²é¡Œã‚’1ã¤ã€ãƒ­ã‚¸ãƒƒã‚¯ãƒ„ãƒªãƒ¼ã§åˆ†è§£ã—ã€æ§‹é€ åŒ–ã—ã¦è€ƒãˆã‚‹ç™–ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ã€Œå®Ÿè¡Œã€ã¸ã®ã‚³ãƒŸãƒƒãƒˆ</strong><br>çµµã«æã„ãŸé¤…ï¼ˆç¶ºéº—ãªè³‡æ–™ï¼‰ã§çµ‚ã‚ã‚‰ã›ãšã€ç¾å ´ãŒå‹•ã‘ã‚‹ãƒ¬ãƒ™ãƒ«ã¾ã§è½ã¨ã—è¾¼ã‚€ã€Œå®Ÿè¡Œæ”¯æ´ã€ã®ã‚¹ã‚­ãƒ«ã‚’ç£¨ãã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆåŠ›</strong><br>èª²é¡Œè§£æ±ºã ã‘ã§ãªãã€ã€Œã‚ãªãŸã«ã¾ãŸé ¼ã¿ãŸã„ã€ã¨æ€ã‚ã›ã‚‹å–¶æ¥­åŠ›ãƒ»é–¢ä¿‚æ§‹ç¯‰åŠ›ã‚’æ„è­˜ã—ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ•ã‚¡ãƒ¼ãƒ  ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼", "å¤§æ‰‹äº‹æ¥­ä¼šç¤¾ çµŒå–¶ä¼ç”»å®¤é•·", "PEãƒ•ã‚¡ãƒ³ãƒ‰ æŠ•è³‡å…ˆãƒãƒªãƒ¥ãƒ¼ã‚¢ãƒƒãƒ—æ‹…å½“"],
                onepoint: "äº‹æ¥­ä¼šç¤¾ã¸ã®è»¢è·ã‚’ç›®æŒ‡ã™å ´åˆã€ã€Œè©•è«–å®¶ã€ã¨è¦‹ã‚‰ã‚Œãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã€Œè‡ªã‚‰æ‰‹ã‚’å‹•ã‹ã—ã€æ³¥ã‚’ã‹ã¶ã£ãŸçµŒé¨“ã€ã‚’è·å‹™çµŒæ­´æ›¸ã«ã©ã†ç››ã‚Šè¾¼ã‚€ã‹ãŒé‡è¦ã§ã™ã€‚"
            },
            "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»DXãƒªãƒ¼ãƒ€ãƒ¼": {
                subtitle: "ã€œæŠ€è¡“ã¨ãƒ“ã‚¸ãƒã‚¹ã‚’èåˆã•ã›ã€æœªæ¥ã‚’å®Ÿè£…ã™ã‚‹å»ºç¯‰å®¶ã€œ",
                marketValue: "ã€ŒæŠ€è¡“ã€ã¨ã€Œãƒ“ã‚¸ãƒã‚¹ï¼ˆåˆ©ç›Šï¼‰ã€ã‚’ç¿»è¨³ã§ãã‚‹äººæã¯æ¥µã‚ã¦ä¸è¶³ã—ã¦ã„ã¾ã™ã€‚çµŒå–¶å±¤ã¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å…±é€šè¨€èªã‚’æŒã¤ã‚ãªãŸã¯ã€ç¾ä»£ä¼æ¥­ã®æœ€é‡è¦äººç‰©ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] PLï¼ˆæç›Šï¼‰æ„Ÿè¦šã®é¤Šæˆ</strong><br>å°å…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚„é–‹ç™ºã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒã€ã©ã‚Œã ã‘ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›ã‚„å£²ä¸Šå¢—ã«ç¹‹ãŒã‚‹ã‹ã‚’ã€å¸¸ã«é‡‘é¡ã§è©¦ç®—ã™ã‚‹ç™–ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ç¿»è¨³åŠ›ã®å‘ä¸Š</strong><br>æŠ€è¡“çš„ãªèª²é¡Œï¼ˆæŠ€è¡“çš„è² å‚µãªã©ï¼‰ã‚’ã€éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ã«å°‚é–€ç”¨èªãªã—ã§èª¬æ˜ã™ã‚‹æ–‡ç« ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] çµ„ç¹”å¤‰é©ï¼ˆãƒã‚§ãƒ³ã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼‰</strong><br>ã‚·ã‚¹ãƒ†ãƒ å°å…¥æ™‚ã®ç¾å ´ã®åç™ºã‚’ã©ã†æŠ‘ãˆã€å®šç€ã•ã›ã‚‹ã‹ã€‚ã€Œäººã€ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚¹ã‚­ãƒ«ã‚’ç£¨ã„ã¦ãã ã•ã„ã€‚"
                ],
                roadmap: ["CTOï¼ˆæœ€é«˜æŠ€è¡“è²¬ä»»è€…ï¼‰ / CDOï¼ˆæœ€é«˜ãƒ‡ã‚¸ã‚¿ãƒ«è²¬ä»»è€…ï¼‰", "VPoEï¼ˆVice President of Engineeringï¼‰", "DXæ¨é€²æœ¬éƒ¨é•·"],
                onepoint: "ãƒã‚¤ã‚¯ãƒ©ã‚¹æ±‚äººã§ã¯ã€ç‰¹å®šã®è¨€èªã‚¹ã‚­ãƒ«ã‚ˆã‚Šã‚‚ã€ŒæŠ€è¡“é¸å®šã®ç†ç”±ã€ã‚„ã€Œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢çµ„ç¹”ã®æ¡ç”¨ãƒ»è©•ä¾¡åˆ¶åº¦ã®æ§‹ç¯‰çµŒé¨“ã€ãŒå•ã‚ã‚Œã¾ã™ã€‚"
            },
            "å°‚é–€æ€§è¿½æ±‚å‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ": {
                subtitle: "ã€œç‰¹å®šã®é ˜åŸŸã‚’æ¥µã‚ã€ä»£æ›¿ä¸å¯èƒ½ãªä¾¡å€¤ã‚’æä¾›ã™ã‚‹è·äººã€œ",
                marketValue: "ã€Œã“ã®åˆ†é‡ãªã‚‰ã€‡ã€‡ã•ã‚“ã€ã¨ã„ã†ç¬¬ä¸€äººè€…ãƒã‚¸ã‚·ãƒ§ãƒ³ã¯æ™¯æ°—å¤‰å‹•ã«å¼·ãã€ç‹¬ç«‹ã‚‚å¯èƒ½ã§ã™ã€‚çŸ¥è­˜ã®æ·±ã•ãŒãã®ã¾ã¾ä»–è€…ã®å‚å…¥éšœå£ï¼ˆé˜²å¾¡åŠ›ï¼‰ã«ãªã‚Šã¾ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] æœ€æ–°æƒ…å ±ã®ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—</strong><br>è‡ªåˆ†ã®å°‚é–€åˆ†é‡ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã€æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„è«–æ–‡ã‚’1ã¤èª­ã¿ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ç¤¾å¤–ç™ºä¿¡ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°</strong><br>ç¤¾å†…ã ã‘ã§ãªãã€æ¥­ç•Œå›£ä½“ã‚„ã‚»ãƒŸãƒŠãƒ¼ç™»å£‡ã€åŸ·ç­†ãªã©ã‚’é€šã˜ã¦ã€Œå€‹äººã®åå‰ã€ã§ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ä½œã£ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.3] å‘¨è¾ºé ˜åŸŸã¸ã®æŸ“ã¿å‡ºã—</strong><br>å°‚é–€çŸ¥è­˜ã‚’ã€éš£æ¥ã™ã‚‹ãƒ“ã‚¸ãƒã‚¹é ˜åŸŸï¼ˆä¾‹ï¼šæ³•å‹™ãªã‚‰ãƒ“ã‚¸ãƒã‚¹é–‹ç™ºï¼‰ã¨ã©ã†çµ¡ã‚ã‚‹ã‹æ„è­˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"
                ],
                roadmap: ["å°‚é–€å½¹å“¡ï¼ˆCLOã€CISOãªã©ï¼‰", "ç‰¹å®šé ˜åŸŸã®æŠ€è¡“é¡§å• / ç‹¬ç«‹ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ", "ç ”ç©¶é–‹ç™ºéƒ¨é–€ã®ãƒˆãƒƒãƒ—"],
                onepoint: "å°‚é–€ç”¨èªã‚’ä¸¦ã¹ã‚‹ã®ã§ã¯ãªãã€å°‚é–€å¤–ã®äººï¼ˆçµŒå–¶è€…ï¼‰ã«å¯¾ã—ã¦ã€Œãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã€ã‚’å¹³æ˜“ãªè¨€è‘‰ã§èª¬æ˜ã§ãã‚‹èƒ½åŠ›ãŒã€å ±é…¬ã‚¢ãƒƒãƒ—ã®æ±ºã‚æ‰‹ã«ãªã‚Šã¾ã™ã€‚"
            },
            "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¿—å‘å‹ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«": {
                subtitle: "ã€œé¡§å®¢ã®å¿ƒã‚’æ´ã¿ã€ä¿¡é ¼ã‚’åç›Šã«å¤‰ãˆã‚‹ãƒˆãƒƒãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã€œ",
                marketValue: "AIãŒé€²åŒ–ã—ã¦ã‚‚ã€é«˜åº¦ãªã€Œäº¤æ¸‰ã€ã‚„ã€Œä¿¡é ¼æ§‹ç¯‰ã€ã¯äººé–“ã«ã—ã‹ã§ãã¾ã›ã‚“ã€‚ç„¡å½¢å•†æã‚„é«˜é¡å•†æã«ãŠã‘ã‚‹æŠ˜è¡åŠ›ã¯ã€ã©ã‚“ãªãƒ“ã‚¸ãƒã‚¹ã§ã‚‚åç›Šã®æŸ±ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] é¡§å®¢æƒ…å ±ã®åé›†</strong><br>é‡è¦é¡§å®¢ã®æœ€æ–°ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹ã‚„æ±ºç®—è³‡æ–™ã‚’èª­ã¿ã€é¡§å®¢ã®çµŒå–¶çŠ¶æ³ã‚’æŠŠæ¡ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ææ¡ˆåŠ›</strong><br>å¾¡ç”¨èãå–¶æ¥­ã‹ã‚‰è„±å´ã—ã€é¡§å®¢è‡ªèº«ã‚‚æ°—ã¥ã„ã¦ã„ãªã„ã€ŒçœŸã®èª²é¡Œï¼ˆã‚¤ãƒ³ã‚µã‚¤ãƒˆï¼‰ã€ã‚’æç¤ºã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¢ºç«‹ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.3] çµŒå–¶è¦–ç‚¹ã®ç²å¾—</strong><br>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ‹…å½“è€…ã ã‘ã§ãªãã€æ±ºè£è€…ï¼ˆå½¹å“¡ã‚¯ãƒ©ã‚¹ï¼‰ã¨å¯¾ç­‰ã«ãƒ“ã‚¸ãƒã‚¹ã®è©±ãŒã§ãã‚‹ã‚ˆã†ã€æ•°å­—ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚"
                ],
                roadmap: ["å–¶æ¥­æœ¬éƒ¨é•· / CROï¼ˆæœ€é«˜åç›Šè²¬ä»»è€…ï¼‰", "ã‚«ãƒ³ãƒˆãƒªãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆå¤–è³‡ç³»ï¼‰", "ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µã‚¯ã‚»ã‚¹è²¬ä»»è€…"],
                onepoint: "ã€Œå£²ä¸Šæ•°å­—ã€ã¯å½“ç„¶ã§ã™ãŒã€ã€Œå†ç¾æ€§ã®ã‚ã‚‹å–¶æ¥­ãƒ—ãƒ­ã‚»ã‚¹ã®æ§‹ç¯‰ã€ã‚„ã€Œè‹¥æ‰‹ã®è‚²æˆæ‰‹æ³•ã€ã‚’è¨€èªåŒ–ã§ãã¦ã„ã‚‹ã¨ã€ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆè·ã¨ã—ã¦ã®è©•ä¾¡ãŒè·³ã­ä¸ŠãŒã‚Šã¾ã™ã€‚"
            },
            "äº‹æ¥­å¤‰é©ãƒªãƒ¼ãƒ€ãƒ¼": {
                subtitle: "ã€œæ··æ²Œã‚’æã‚Œãšã€ã‚¼ãƒ­ã‹ã‚‰ã‚¤ãƒã‚’ç”Ÿã¿å‡ºã™é–‹æ‹“è€…ã€œ",
                marketValue: "æ–°è¦äº‹æ¥­ã‚„çµ„ç¹”æ€¥æ‹¡å¤§ãªã©ã€ã‚«ã‚ªã‚¹ãªçŠ¶æ³ã‚’æ¥½ã—ã‚ã‚‹äººæã¯è²´é‡ã§ã™ã€‚æ•´ã£ã¦ã„ãªã„ç’°å¢ƒã§è‡ªèµ°ã—é“ã‚’ä½œã‚‹åŠ›ã¯ã€ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³éƒ¨é–€ã§æœ€ã‚‚æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ã‚¼ãƒ­ãƒ™ãƒ¼ã‚¹æ€è€ƒ</strong><br>ã€Œã‚‚ã—ä»Šã®äº‹æ¥­ãŒæ˜æ—¥ãªããªã£ãŸã‚‰ä½•ã‚’ã™ã‚‹ã‹ã€ã‚’1ã¤è€ƒãˆã€ãƒ¡ãƒ¢ã«æ®‹ã—ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ä»®èª¬æ¤œè¨¼ã®é«˜é€ŸåŒ–</strong><br>å®Œç’§ãªè¨ˆç”»ã‚’ç«‹ã¦ã‚‹ã‚ˆã‚Šã€å°ã•ãªãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’å¸‚å ´ã«å‡ºã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹ã‚µã‚¤ã‚¯ãƒ«ï¼ˆPDCAï¼‰ã‚’é«˜é€ŸåŒ–ã•ã›ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.3] ã€Œæ’¤é€€ã€ã®åŸºæº–ä½œã‚Š</strong><br>æ”»ã‚ã‚‹ã ã‘ã§ãªãã€ãƒ€ãƒ¡ãªæ™‚ã«ã©ã“ã§æåˆ‡ã‚Šã™ã‚‹ã‹ã¨ã„ã†ã€å†·å¾¹ãªåˆ¤æ–­è»¸ã‚’æŒã¤è¨“ç·´ã‚’ã—ã¾ã—ã‚‡ã†ã€‚"
                ],
                roadmap: ["èµ·æ¥­å®¶ / CEO", "æ–°è¦äº‹æ¥­é–‹ç™ºå®¤é•·", "äº‹æ¥­å†ç”Ÿãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"],
                onepoint: "å¤±æ•—çµŒé¨“ã“ããŒè³‡ç”£ã§ã™ã€‚ã€Œãªãœå¤±æ•—ã—ãŸã‹ã€ã€Œæ¬¡ã«ã©ã†æ´»ã‹ã™ã‹ã€ã‚’æ·±ãå†…çœã—èªã‚Œã‚‹äººã¯ã€æŠ•è³‡å®¶ã‚„çµŒå–¶é™£ã‹ã‚‰æ·±ã„ä¿¡é ¼ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚"
            },
            "ãƒãƒ«ãƒã‚¿ãƒ¬ãƒ³ãƒˆå‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ": {
                subtitle: "ã€œã‚ã‚‰ã‚†ã‚‹ãƒ”ãƒ¼ã‚¹ã‚’ç¹‹ãåˆã‚ã›ã€çµ„ç¹”ã‚’æ©Ÿèƒ½ã•ã›ã‚‹ä¸‡èƒ½ã®æ¥ç€å‰¤ã€œ",
                marketValue: "å¤‰åŒ–ã®æ¿€ã—ã„ç¾ä»£ã§ã¯ã€Œå…¨ä½“æœ€é©åŒ–ã®ãƒ—ãƒ­ã€ã¨ã—ã¦å†è©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚éƒ¨é–€é–“ã®å£ã‚’å–ã‚Šæ‰•ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€²ã‚ã‚‹åŠ›ã¯ã€COOã‚„ç¤¾é•·å®¤é•·ã¨ã—ã¦é‡è¦ã§ã™ã€‚",
                nextActions: [
                    "<strong>[Lv.1] ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã®å¯è¦–åŒ–</strong><br>è‡ªåˆ†ãŒç¹‹ã’ã‚‰ã‚Œãã†ãªã€Œéƒ¨ç½²ã¨éƒ¨ç½²ã€ã‚„ã€Œäººã¨äººã€ã‚’æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
                    "<strong>[Lv.2] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆPMï¼‰ã®ä½“ç³»åŒ–</strong><br>è‡ªåˆ†ã®èª¿æ•´åŠ›ã‚’ã€PMBOKãªã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ç…§ã‚‰ã—åˆã‚ã›ã€ã€Œå±äººçš„ãªã‚¹ã‚­ãƒ«ã€ã‹ã‚‰ã€Œä½“ç³»çš„ãªæ‰‹æ³•ã€ã¸æ˜‡è¯ã•ã›ã¦ãã ã•ã„ã€‚",
                    "<strong>[Lv.3] ã€Œç¿»è¨³è€…ã€ã¨ã—ã¦ã®ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°</strong><br>å–¶æ¥­ã¨é–‹ç™ºã€çµŒå–¶ã¨ç¾å ´ãªã©ã€è¨€è‘‰ãŒé€šã˜ã«ãã„éƒ¨ç½²ã®é–“ã«å…¥ã‚Šã€é€šè¨³ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹å®Ÿç¸¾ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚"
                ],
                roadmap: ["COOï¼ˆæœ€é«˜åŸ·è¡Œè²¬ä»»è€…ï¼‰", "Chief of Staffï¼ˆçµŒå–¶ä¼ç”»ãƒ»ç¤¾é•·å®¤é•·ï¼‰", "å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"],
                onepoint: "ã€Œä½•ã§ã‚‚ã§ãã¾ã™ã€ã¯ã€Œä½•ã‚‚ã§ãã¾ã›ã‚“ã€ã¨å–ã‚‰ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã€Œç§ã¯ã€è¤‡é›‘ãªåˆ©å®³é–¢ä¿‚ã‚’èª¿æ•´ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Œé‚ã•ã›ã‚‹ãƒ—ãƒ­ã§ã™ã€ã¨ã€æ©Ÿèƒ½ï¼ˆFunctionï¼‰ã¨ã—ã¦ã®å¼·ã¿ã‚’å®šç¾©ã—ã¦ãã ã•ã„ã€‚"
            }
        };

        const STORAGE_KEY = 'kotora_career_v3';
        let currentQuestion = 0;
        let answers = {};

        // --- åˆæœŸåŒ– ---
        document.addEventListener('DOMContentLoaded', () => {
            initStorageCheck();
            document.body.addEventListener('touchstart', function() {}, {passive: true});
            document.getElementById('startBtn').addEventListener('click', () => switchPage('page-start', 'page-questions'));
            document.getElementById('restartBtn').addEventListener('click', () => switchPage('page-start', 'page-questions'));
            document.getElementById('resumeBtn').addEventListener('click', restorePreviousResult);
            document.getElementById('prevBtn').addEventListener('click', prevQuestion);
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('retryBtn').addEventListener('click', () => location.reload());
            showQuestion(0, 'init');
        });

        function switchPage(fromId, toId) {
            const fromPage = document.getElementById(fromId);
            const toPage = document.getElementById(toId);
            window.scrollTo(0, 0);
            toPage.classList.add('active', 'slide-in-right');
            setTimeout(() => {
                fromPage.classList.remove('active');
                toPage.classList.remove('slide-in-right');
            }, 500);
        }

        function getStorageData() {
            try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || { latest: null, actions: {} }; }
            catch { return { latest: null, actions: {} }; }
        }
        function saveStorageData(data) { localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }

        function initStorageCheck() {
            const data = getStorageData();
            if (data.latest && data.latest.type) {
                document.getElementById('welcomeSection').style.display = 'block';
                document.getElementById('introSection').style.display = 'none';
                document.getElementById('lastResultType').textContent = data.latest.type;
                const d = new Date(data.latest.date);
                document.getElementById('lastDate').textContent = `${d.getMonth()+1}/${d.getDate()} ${d.getHours()}:${String(d.getMinutes()).padStart(2,'0')}`;
            }
        }

        function showQuestion(index, mode = 'next') {
            const container = document.getElementById('questionContainer');
            const q = questions[index];
            const inputType = q.type === 'checkbox' ? 'checkbox' : 'radio';
            
            let html = `<div class="question-title" style="font-size:20px; font-weight:bold; margin-bottom:15px;">Q${index + 1}. ${q.text}</div>`;
            if (inputType === 'checkbox') html += `<div style="font-size:12px; color:#667eea; margin-bottom:15px;">âœ“ è¤‡æ•°é¸æŠå¯</div>`;
            
            q.options.forEach((option, i) => {
                const isChecked = checkIfSelected(q.id, i, inputType);
                html += `
                    <div class="option ${isChecked ? 'selected' : ''}" onclick="handleOptionClick(this, ${index}, ${i}, '${inputType}')">
                        <input type="${inputType}" ${isChecked ? 'checked' : ''} readonly>
                        <span>${option.text}</span>
                    </div>`;
            });

            if (mode === 'init') {
                container.innerHTML = html;
            } else {
                container.classList.add('fade-out-left');
                setTimeout(() => {
                    container.innerHTML = html;
                    container.classList.remove('fade-out-left');
                    container.classList.add('fade-in-right');
                    setTimeout(() => container.classList.remove('fade-in-right'), 400);
                }, 300);
            }

            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `Q ${index + 1} / ${questions.length}`;
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').textContent = index === questions.length - 1 ? 'è¨ºæ–­çµæœã‚’è¦‹ã‚‹' : 'æ¬¡ã¸';
        }

        function checkIfSelected(qId, optIndex, inputType) {
            if (!answers[qId]) return false;
            if (inputType === 'checkbox') return answers[qId].includes(optIndex);
            return answers[qId] === optIndex;
        }

        window.handleOptionClick = function(el, qIndex, optIndex, inputType) {
            const q = questions[qIndex];
            const checkbox = el.querySelector('input');
            if (inputType === 'checkbox') {
                if (!answers[q.id]) answers[q.id] = [];
                const idx = answers[q.id].indexOf(optIndex);
                if (idx > -1) {
                    answers[q.id].splice(idx, 1);
                    checkbox.checked = false;
                    el.classList.remove('selected');
                } else {
                    answers[q.id].push(optIndex);
                    checkbox.checked = true;
                    el.classList.add('selected');
                }
            } else {
                answers[q.id] = optIndex;
                const allOpts = el.parentElement.querySelectorAll('.option');
                allOpts.forEach(o => {
                    o.classList.remove('selected');
                    o.querySelector('input').checked = false;
                });
                checkbox.checked = true;
                el.classList.add('selected');
            }
        };

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion, 'prev');
            }
        }

        function nextQuestion() {
            const q = questions[currentQuestion];
            if (!validateAnswer(q)) {
                alert('é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„');
                return;
            }
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion, 'next');
            } else {
                calculateAndShowResult();
            }
        }

        function validateAnswer(q) {
            if (q.type === 'checkbox') return answers[q.id] && answers[q.id].length > 0;
            return answers[q.id] !== undefined;
        }

        function calculateAndShowResult() {
            let scores = {};
            questions.forEach(q => {
                const ans = answers[q.id];
                if (ans === undefined) return;
                const selected = Array.isArray(ans) ? ans : [ans];
                selected.forEach(idx => {
                    const sc = q.options[idx].scores;
                    for (const k in sc) scores[k] = (scores[k] || 0) + sc[k];
                });
            });

            const get = k => scores[k] || 0;
            let type = "ãƒãƒ«ãƒã‚¿ãƒ¬ãƒ³ãƒˆå‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ";
            if (get('leadership') + get('strategy') + get('management') >= 13) type = "æˆ¦ç•¥æ€è€ƒå‹ãƒªãƒ¼ãƒ€ãƒ¼";
            else if (get('finance') + get('analytical') >= 7) type = "é‡‘èã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ";
            else if (get('consulting') + get('strategy') >= 8) type = "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«";
            else if (get('it') + get('innovation') >= 7) type = "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»DXãƒªãƒ¼ãƒ€ãƒ¼";
            else if (get('specialist') >= 8) type = "å°‚é–€æ€§è¿½æ±‚å‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ";
            else if (get('communication') + get('negotiation') >= 8) type = "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¿—å‘å‹ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«";
            else if ((get('leadership') + get('versatility') >= 9) || (get('entrepreneurship') >= 5)) type = "äº‹æ¥­å¤‰é©ãƒªãƒ¼ãƒ€ãƒ¼";

            const data = getStorageData();
            data.latest = { type: type, date: new Date().getTime() };
            saveStorageData(data);

            document.getElementById('resultType').textContent = type;
            document.getElementById('resultDescription').textContent = TYPE_INFO[type];
            displayDetailReport(type);
            
            switchPage('page-questions', 'page-results');
            triggerResultAnimations();
        }

        function restorePreviousResult() {
            const data = getStorageData();
            if (data.latest && data.latest.type) {
                const type = data.latest.type;
                document.getElementById('resultType').textContent = type;
                document.getElementById('resultDescription').textContent = TYPE_INFO[type];
                displayDetailReport(type);
                switchPage('page-start', 'page-results');
                triggerResultAnimations();
            }
        }

        function triggerResultAnimations() {
            const items = document.querySelectorAll('.stagger-item');
            items.forEach(item => {
                item.classList.remove('stagger-visible');
                void item.offsetWidth;
                item.classList.add('stagger-visible');
            });
        }

        function displayDetailReport(type) {
            const data = detailReports[type];
            if (!data) return;

            document.getElementById('detailReport').style.display = 'block';
            document.getElementById('detailSubtitle').textContent = data.subtitle;
            document.getElementById('marketValue').textContent = data.marketValue;

            const list = document.getElementById('nextActions');
            list.innerHTML = '';
            const stored = getStorageData();
            const checks = stored.actions[type] || [];

            data.nextActions.forEach((txt, i) => {
                const div = document.createElement('div');
                const isDone = !!checks[i];
                div.className = `todo-item ${isDone ? 'completed' : ''}`;
                div.innerHTML = `<input type="checkbox" class="todo-checkbox" ${isDone ? 'checked' : ''}><span>${txt}</span>`;
                
                div.addEventListener('click', function(e) {
                    if (e.target.tagName !== 'INPUT') {
                        const cb = this.querySelector('input');
                        cb.checked = !cb.checked;
                    }
                    const cb = this.querySelector('input');
                    
                    if(cb.checked) this.classList.add('completed');
                    else this.classList.remove('completed');
                    
                    saveActionState(type, i, cb.checked);
                    
                    if (cb.checked) {
                        checkCompletion(type, data.nextActions.length);
                    } else {
                        updateProgress(type, data.nextActions.length);
                    }
                });
                list.appendChild(div);
            });
            updateProgress(type, data.nextActions.length);

            const roadmapUl = document.getElementById('roadmap');
            roadmapUl.innerHTML = '';
            data.roadmap.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                roadmapUl.appendChild(li);
            });

            document.getElementById('onepoint').textContent = data.onepoint;
        }

        function saveActionState(type, idx, val) {
            const d = getStorageData();
            if (!d.actions[type]) d.actions[type] = [];
            d.actions[type][idx] = val;
            saveStorageData(d);
        }

        function updateProgress(type, total) {
            const d = getStorageData();
            const c = d.actions[type] || [];
            const count = c.filter(Boolean).length;
            const pct = Math.round((count / total) * 100);
            document.getElementById('actionPercent').textContent = `${pct}%`;
            document.getElementById('actionBar').style.width = `${pct}%`;
        }

        function checkCompletion(type, total) {
            const d = getStorageData();
            const c = d.actions[type] || [];
            const count = c.filter(Boolean).length;
            const pct = Math.round((count / total) * 100);

            document.getElementById('actionPercent').textContent = `${pct}%`;
            document.getElementById('actionBar').style.width = `${pct}%`;

            if (pct === 100) {
                celebrate();
            }
        }

        function celebrate() {
            if (typeof confetti === 'function') {
                const duration = 2000;
                const end = Date.now() + duration;

                (function frame() {
                    confetti({
                        particleCount: 5, angle: 60, spread: 55, origin: { x: 0 },
                        colors: ['#667eea', '#764ba2', '#ffeb3b']
                    });
                    confetti({
                        particleCount: 5, angle: 120, spread: 55, origin: { x: 1 },
                        colors: ['#667eea', '#764ba2', '#ffeb3b']
                    });

                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                }());
            }
            playCelebrationSound();
        }

        function playCelebrationSound() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            const ctx = new AudioContext();
            const notes = [523.25, 659.25, 783.99, 1046.50];
            
            notes.forEach((freq, i) => {
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = 'triangle';
                osc.frequency.value = freq;
                osc.connect(gain);
                gain.connect(ctx.destination);
                
                const startTime = ctx.currentTime + (i * 0.05);
                gain.gain.setValueAtTime(0, startTime);
                gain.gain.linearRampToValueAtTime(0.1, startTime + 0.01);
                gain.gain.exponentialRampToValueAtTime(0.001, startTime + 0.4);
                
                osc.start(startTime);
                osc.stop(startTime + 0.4);
            });
        }
    </script>
</body>
</html>